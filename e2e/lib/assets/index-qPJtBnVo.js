import{u as wn,v as kn,w as Ie,k as yt,i as pe,l as M,x as Cn,y as yn,P as ne,S as v,z as xn,T as B,F as L,A as j,B as Sn,a as Le,C as xt,G as St,N as An,H as Rn,I as G,J as ge,K as At,L as Tn,O as Rt,Q as _e,R as Mn,$ as Pe,U as Nn,V as Dn,W as vn,X,Y as Oe,Z as oe,_ as Tt,a0 as $e,a1 as te,a2 as N,a3 as Fn,a4 as O,a5 as zn,a6 as ye,a7 as En,a8 as ot,a9 as ee,aa as V,ab as In,ac as Ln}from"./utils-CZPcvWg1.js";import{o as Z}from"./default-0Dp3JUBc.js";function _n(e){return t=>{for(let n=t.depth;n>0;n-=1){const o=t.node(n);if(e(o)){const r=t.before(n),i=t.after(n);return{from:r,to:i,node:o}}}}}function Pn(e,t){return _n(n=>n.type===t)(e)}function k(e,t){return Object.assign(e,{meta:{package:"@milkdown/preset-gfm",...t}}),e}const Be=wn("strike_through");k(Be,{displayName:"Attr<strikethrough>",group:"Strikethrough"});const re=kn("strike_through",e=>({parseDOM:[{tag:"del"},{style:"text-decoration",getAttrs:t=>t==="line-through"}],toDOM:t=>["del",e.get(Be.key)(t)],parseMarkdown:{match:t=>t.type==="delete",runner:(t,n,o)=>{t.openMark(o),t.next(n.children),t.closeMark(o)}},toMarkdown:{match:t=>t.type.name==="strike_through",runner:(t,n)=>{t.withMark(n,"delete")}}}));k(re.mark,{displayName:"MarkSchema<strikethrough>",group:"Strikethrough"});k(re.ctx,{displayName:"MarkSchemaCtx<strikethrough>",group:"Strikethrough"});const je=M("ToggleStrikeThrough",e=>()=>Cn(re.type(e)));k(je,{displayName:"Command<ToggleStrikethrough>",group:"Strikethrough"});const Mt=Ie(e=>yn(/~([^~]+)~$/,re.type(e)));k(Mt,{displayName:"InputRule<strikethrough>",group:"Strikethrough"});const He=yt("strikeThroughKeymap",{ToggleStrikethrough:{shortcuts:"Mod-Alt-x",command:e=>{const t=e.get(pe);return()=>t.call(je.key)}}});k(He.ctx,{displayName:"KeymapCtx<strikethrough>",group:"Strikethrough"});k(He.shortcuts,{displayName:"Keymap<strikethrough>",group:"Strikethrough"});var De,ve;if(typeof WeakMap<"u"){let e=new WeakMap;De=t=>e.get(t),ve=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;De=o=>{for(let r=0;r<e.length;r+=2)if(e[r]==o)return e[r+1]},ve=(o,r)=>(n==10&&(n=0),e[n++]=o,e[n++]=r)}var x=class{constructor(e,t,n,o){this.width=e,this.height=t,this.map=n,this.problems=o}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const o=t%this.width,r=t/this.width|0;let i=o+1,l=r+1;for(let a=1;i<this.width&&this.map[t+a]==n;a++)i++;for(let a=1;l<this.height&&this.map[t+this.width*a]==n;a++)l++;return{left:o,top:r,right:i,bottom:l}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:o,right:r,top:i,bottom:l}=this.findCell(e);return t=="horiz"?(n<0?o==0:r==this.width)?null:this.map[i*this.width+(n<0?o-1:r)]:(n<0?i==0:l==this.height)?null:this.map[o+this.width*(n<0?i-1:l)]}rectBetween(e,t){const{left:n,right:o,top:r,bottom:i}=this.findCell(e),{left:l,right:a,top:s,bottom:u}=this.findCell(t);return{left:Math.min(n,l),top:Math.min(r,s),right:Math.max(o,a),bottom:Math.max(i,u)}}cellsInRect(e){const t=[],n={};for(let o=e.top;o<e.bottom;o++)for(let r=e.left;r<e.right;r++){const i=o*this.width+r,l=this.map[i];n[l]||(n[l]=!0,!(r==e.left&&r&&this.map[i-1]==l||o==e.top&&o&&this.map[i-this.width]==l)&&t.push(l))}return t}positionAt(e,t,n){for(let o=0,r=0;;o++){const i=r+n.child(o).nodeSize;if(o==e){let l=t+e*this.width;const a=(e+1)*this.width;for(;l<a&&this.map[l]<r;)l++;return l==a?i-1:this.map[l]}r=i}}static get(e){return De(e)||ve(e,On(e))}};function On(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=$n(e),n=e.childCount,o=[];let r=0,i=null;const l=[];for(let u=0,f=t*n;u<f;u++)o[u]=0;for(let u=0,f=0;u<n;u++){const c=e.child(u);f++;for(let p=0;;p++){for(;r<o.length&&o[r]!=0;)r++;if(p==c.childCount)break;const b=c.child(p),{colspan:w,rowspan:g,colwidth:C}=b.attrs;for(let y=0;y<g;y++){if(y+u>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:f,n:g-y});break}const T=r+y*t;for(let A=0;A<w;A++){o[T+A]==0?o[T+A]=f:(i||(i=[])).push({type:"collision",row:u,pos:f,n:w-A});const R=C&&C[A];if(R){const z=(T+A)%t*2,P=l[z];P==null||P!=R&&l[z+1]==1?(l[z]=R,l[z+1]=1):P==R&&l[z+1]++}}}r+=w,f+=b.nodeSize}const h=(u+1)*t;let d=0;for(;r<h;)o[r++]==0&&d++;d&&(i||(i=[])).push({type:"missing",row:u,n:d}),f++}const a=new x(t,n,o,i);let s=!1;for(let u=0;!s&&u<l.length;u+=2)l[u]!=null&&l[u+1]<n&&(s=!0);return s&&Bn(a,l,e),a}function $n(e){let t=-1,n=!1;for(let o=0;o<e.childCount;o++){const r=e.child(o);let i=0;if(n)for(let l=0;l<o;l++){const a=e.child(l);for(let s=0;s<a.childCount;s++){const u=a.child(s);l+u.attrs.rowspan>o&&(i+=u.attrs.colspan)}}for(let l=0;l<r.childCount;l++){const a=r.child(l);i+=a.attrs.colspan,a.attrs.rowspan>1&&(n=!0)}t==-1?t=i:t!=i&&(t=Math.max(t,i))}return t}function Bn(e,t,n){e.problems||(e.problems=[]);const o={};for(let r=0;r<e.map.length;r++){const i=e.map[r];if(o[i])continue;o[i]=!0;const l=n.nodeAt(i);if(!l)throw new RangeError(`No cell with offset ${i} found`);let a=null;const s=l.attrs;for(let u=0;u<s.colspan;u++){const f=(r+u)%e.width,c=t[f*2];c!=null&&(!s.colwidth||s.colwidth[u]!=c)&&((a||(a=jn(s)))[u]=c)}a&&e.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}function jn(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function rt(e,t){if(typeof e=="string")return{};const n=e.getAttribute("data-colwidth"),o=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map(l=>Number(l)):null,r=Number(e.getAttribute("colspan")||1),i={colspan:r,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:o&&o.length==r?o:null};for(const l in t){const a=t[l].getFromDOM,s=a&&a(e);s!=null&&(i[l]=s)}return i}function lt(e,t){const n={};e.attrs.colspan!=1&&(n.colspan=e.attrs.colspan),e.attrs.rowspan!=1&&(n.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(n["data-colwidth"]=e.attrs.colwidth.join(","));for(const o in t){const r=t[o].setDOMAttr;r&&r(e.attrs[o],n)}return n}function Hn(e){const t=e.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const o in t)n[o]={default:t[o].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:o=>rt(o,t)}],toDOM(o){return["td",lt(o,t),0]}},table_header:{content:e.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:o=>rt(o,t)}],toDOM(o){return["th",lt(o,t),0]}}}}function F(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const o=e.nodes[n],r=o.spec.tableRole;r&&(t[r]=o)}}return t}var $=new ne("selectingCells");function be(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function D(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function we(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=be(t.$head)||Wn(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function Wn(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const o=t.type.spec.tableRole;if(o=="cell"||o=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const o=t.type.spec.tableRole;if(o=="cell"||o=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function it(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function Kn(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function We(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function Nt(e,t,n){const o=e.node(-1),r=x.get(o),i=e.start(-1),l=r.nextCell(e.pos-i,t,n);return l==null?null:e.node(0).resolve(i+l)}function K(e,t,n=1){const o={...e,colspan:e.colspan-n};return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(t,n),o.colwidth.some(r=>r>0)||(o.colwidth=null)),o}function Gn(e,t,n=1){const o={...e,colspan:e.colspan+n};if(o.colwidth){o.colwidth=o.colwidth.slice();for(let r=0;r<n;r++)o.colwidth.splice(t,0,0)}return o}function Vn(e,t,n){const o=F(t.type.schema).header_cell;for(let r=0;r<e.height;r++)if(t.nodeAt(e.map[n+r*e.width]).type!=o)return!1;return!0}var S=class I extends v{constructor(t,n=t){const o=t.node(-1),r=x.get(o),i=t.start(-1),l=r.rectBetween(t.pos-i,n.pos-i),a=t.node(0),s=r.cellsInRect(l).filter(f=>f!=n.pos-i);s.unshift(n.pos-i);const u=s.map(f=>{const c=o.nodeAt(f);if(!c)throw RangeError(`No cell with offset ${f} found`);const h=i+f+1;return new xn(a.resolve(h),a.resolve(h+c.content.size))});super(u[0].$from,u[0].$to,u),this.$anchorCell=t,this.$headCell=n}map(t,n){const o=t.resolve(n.map(this.$anchorCell.pos)),r=t.resolve(n.map(this.$headCell.pos));if(it(o)&&it(r)&&We(o,r)){const i=this.$anchorCell.node(-1)!=o.node(-1);return i&&this.isRowSelection()?I.rowSelection(o,r):i&&this.isColSelection()?I.colSelection(o,r):new I(o,r)}return B.between(o,r)}content(){const t=this.$anchorCell.node(-1),n=x.get(t),o=this.$anchorCell.start(-1),r=n.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o),i={},l=[];for(let s=r.top;s<r.bottom;s++){const u=[];for(let f=s*n.width+r.left,c=r.left;c<r.right;c++,f++){const h=n.map[f];if(i[h])continue;i[h]=!0;const d=n.findCell(h);let p=t.nodeAt(h);if(!p)throw RangeError(`No cell with offset ${h} found`);const b=r.left-d.left,w=d.right-r.right;if(b>0||w>0){let g=p.attrs;if(b>0&&(g=K(g,0,b)),w>0&&(g=K(g,g.colspan-w,w)),d.left<r.left){if(p=p.type.createAndFill(g),!p)throw RangeError(`Could not create cell with attrs ${JSON.stringify(g)}`)}else p=p.type.create(g,p.content)}if(d.top<r.top||d.bottom>r.bottom){const g={...p.attrs,rowspan:Math.min(d.bottom,r.bottom)-Math.max(d.top,r.top)};d.top<r.top?p=p.type.createAndFill(g):p=p.type.create(g,p.content)}u.push(p)}l.push(t.child(s).copy(L.from(u)))}const a=this.isColSelection()&&this.isRowSelection()?t:l;return new j(L.from(a),1,1)}replace(t,n=j.empty){const o=t.steps.length,r=this.ranges;for(let l=0;l<r.length;l++){const{$from:a,$to:s}=r[l],u=t.mapping.slice(o);t.replace(u.map(a.pos),u.map(s.pos),l?j.empty:n)}const i=v.findFrom(t.doc.resolve(t.mapping.slice(o).map(this.to)),-1);i&&t.setSelection(i)}replaceWith(t,n){this.replace(t,new j(L.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),o=x.get(n),r=this.$anchorCell.start(-1),i=o.cellsInRect(o.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let l=0;l<i.length;l++)t(n.nodeAt(i[l]),r+i[l])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const o=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(o,r)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const o=t.node(-1),r=x.get(o),i=t.start(-1),l=r.findCell(t.pos-i),a=r.findCell(n.pos-i),s=t.node(0);return l.top<=a.top?(l.top>0&&(t=s.resolve(i+r.map[l.left])),a.bottom<r.height&&(n=s.resolve(i+r.map[r.width*(r.height-1)+a.right-1]))):(a.top>0&&(n=s.resolve(i+r.map[a.left])),l.bottom<r.height&&(t=s.resolve(i+r.map[r.width*(r.height-1)+l.right-1]))),new I(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=x.get(t),o=this.$anchorCell.start(-1),r=n.colCount(this.$anchorCell.pos-o),i=n.colCount(this.$headCell.pos-o);if(Math.min(r,i)>0)return!1;const l=r+this.$anchorCell.nodeAfter.attrs.colspan,a=i+this.$headCell.nodeAfter.attrs.colspan;return Math.max(l,a)==n.width}eq(t){return t instanceof I&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const o=t.node(-1),r=x.get(o),i=t.start(-1),l=r.findCell(t.pos-i),a=r.findCell(n.pos-i),s=t.node(0);return l.left<=a.left?(l.left>0&&(t=s.resolve(i+r.map[l.top*r.width])),a.right<r.width&&(n=s.resolve(i+r.map[r.width*(a.top+1)-1]))):(a.left>0&&(n=s.resolve(i+r.map[a.top*r.width])),l.right<r.width&&(t=s.resolve(i+r.map[r.width*(l.top+1)-1]))),new I(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new I(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,o=n){return new I(t.resolve(n),t.resolve(o))}getBookmark(){return new qn(this.$anchorCell.pos,this.$headCell.pos)}};S.prototype.visible=!1;v.jsonID("cell",S);var qn=class Dt{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Dt(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),o=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&o.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&o.index()<o.parent.childCount&&We(n,o)?new S(n,o):v.near(o,1)}};function Un(e){if(!(e.selection instanceof S))return null;const t=[];return e.selection.forEachCell((n,o)=>{t.push(xt.node(o,o+n.nodeSize,{class:"selectedCell"}))}),St.create(e.doc,t)}function Jn({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,o=t.pos,r=e.depth;for(;r>=0&&!(e.after(r+1)<e.end(r));r--,n++);for(let i=t.depth;i>=0&&!(t.before(i+1)>t.start(i));i--,o--);return n==o&&/row|table/.test(e.node(r).type.spec.tableRole)}function Xn({$from:e,$to:t}){let n,o;for(let r=e.depth;r>0;r--){const i=e.node(r);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){n=i;break}}for(let r=t.depth;r>0;r--){const i=t.node(r);if(i.type.spec.tableRole==="cell"||i.type.spec.tableRole==="header_cell"){o=i;break}}return n!==o&&t.parentOffset===0}function Zn(e,t,n){const o=(t||e).selection,r=(t||e).doc;let i,l;if(o instanceof An&&(l=o.node.type.spec.tableRole)){if(l=="cell"||l=="header_cell")i=S.create(r,o.from);else if(l=="row"){const a=r.resolve(o.from+1);i=S.rowSelection(a,a)}else if(!n){const a=x.get(o.node),s=o.from+1,u=s+a.map[a.width*a.height-1];i=S.create(r,s+1,u)}}else o instanceof B&&Jn(o)?i=B.create(r,o.from):o instanceof B&&Xn(o)&&(i=B.create(r,o.$from.start(),o.$from.end()));return i&&(t||(t=e.tr)).setSelection(i),t}var Qn=new ne("fix-tables");function vt(e,t,n,o){const r=e.childCount,i=t.childCount;e:for(let l=0,a=0;l<i;l++){const s=t.child(l);for(let u=a,f=Math.min(r,l+3);u<f;u++)if(e.child(u)==s){a=u+1,n+=s.nodeSize;continue e}o(s,n),a<r&&e.child(a).sameMarkup(s)?vt(e.child(a),s,n+1,o):s.nodesBetween(0,s.content.size,o,n+1),n+=s.nodeSize}}function Yn(e,t){let n;const o=(r,i)=>{r.type.spec.tableRole=="table"&&(n=eo(e,r,i,n))};return t?t.doc!=e.doc&&vt(t.doc,e.doc,0,o):e.doc.descendants(o),n}function eo(e,t,n,o){const r=x.get(t);if(!r.problems)return o;o||(o=e.tr);const i=[];for(let s=0;s<r.height;s++)i.push(0);for(let s=0;s<r.problems.length;s++){const u=r.problems[s];if(u.type=="collision"){const f=t.nodeAt(u.pos);if(!f)continue;const c=f.attrs;for(let h=0;h<c.rowspan;h++)i[u.row+h]+=u.n;o.setNodeMarkup(o.mapping.map(n+1+u.pos),null,K(c,c.colspan-u.n,u.n))}else if(u.type=="missing")i[u.row]+=u.n;else if(u.type=="overlong_rowspan"){const f=t.nodeAt(u.pos);if(!f)continue;o.setNodeMarkup(o.mapping.map(n+1+u.pos),null,{...f.attrs,rowspan:f.attrs.rowspan-u.n})}else if(u.type=="colwidth mismatch"){const f=t.nodeAt(u.pos);if(!f)continue;o.setNodeMarkup(o.mapping.map(n+1+u.pos),null,{...f.attrs,colwidth:u.colwidth})}}let l,a;for(let s=0;s<i.length;s++)i[s]&&(l==null&&(l=s),a=s);for(let s=0,u=n+1;s<r.height;s++){const f=t.child(s),c=u+f.nodeSize,h=i[s];if(h>0){let d="cell";f.firstChild&&(d=f.firstChild.type.spec.tableRole);const p=[];for(let w=0;w<h;w++){const g=F(e.schema)[d].createAndFill();g&&p.push(g)}const b=(s==0||l==s-1)&&a==s?u+1:c-1;o.insert(o.mapping.map(b),p)}u=c}return o.setMeta(Qn,{fixTables:!0})}function H(e){const t=e.selection,n=we(e),o=n.node(-1),r=n.start(-1),i=x.get(o);return{...t instanceof S?i.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r):i.findCell(n.pos-r),tableStart:r,map:i,table:o}}function Ft(e,{map:t,tableStart:n,table:o},r){let i=r>0?-1:0;Vn(t,o,r+i)&&(i=r==0||r==t.width?null:0);for(let l=0;l<t.height;l++){const a=l*t.width+r;if(r>0&&r<t.width&&t.map[a-1]==t.map[a]){const s=t.map[a],u=o.nodeAt(s);e.setNodeMarkup(e.mapping.map(n+s),null,Gn(u.attrs,r-t.colCount(s))),l+=u.attrs.rowspan-1}else{const s=i==null?F(o.type.schema).cell:o.nodeAt(t.map[a+i]).type,u=t.positionAt(l,r,o);e.insert(e.mapping.map(n+u),s.createAndFill())}}return e}function to(e,t){if(!D(e))return!1;if(t){const n=H(e);t(Ft(e.tr,n,n.left))}return!0}function no(e,t){if(!D(e))return!1;if(t){const n=H(e);t(Ft(e.tr,n,n.right))}return!0}function oo(e,{map:t,table:n,tableStart:o},r){const i=e.mapping.maps.length;for(let l=0;l<t.height;){const a=l*t.width+r,s=t.map[a],u=n.nodeAt(s),f=u.attrs;if(r>0&&t.map[a-1]==s||r<t.width-1&&t.map[a+1]==s)e.setNodeMarkup(e.mapping.slice(i).map(o+s),null,K(f,r-t.colCount(s)));else{const c=e.mapping.slice(i).map(o+s);e.delete(c,c+u.nodeSize)}l+=f.rowspan}}function ro(e,t){if(!D(e))return!1;if(t){const n=H(e),o=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let r=n.right-1;oo(o,n,r),r!=n.left;r--){const i=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=x.get(i)}t(o)}return!0}function lo(e,{map:t,table:n,tableStart:o},r){let i=0;for(let u=0;u<r;u++)i+=n.child(u).nodeSize;const l=i+n.child(r).nodeSize,a=e.mapping.maps.length;e.delete(i+o,l+o);const s=new Set;for(let u=0,f=r*t.width;u<t.width;u++,f++){const c=t.map[f];if(!s.has(c)){if(s.add(c),r>0&&c==t.map[f-t.width]){const h=n.nodeAt(c).attrs;e.setNodeMarkup(e.mapping.slice(a).map(c+o),null,{...h,rowspan:h.rowspan-1}),u+=h.colspan-1}else if(r<t.height&&c==t.map[f+t.width]){const h=n.nodeAt(c),d=h.attrs,p=h.type.create({...d,rowspan:h.attrs.rowspan-1},h.content),b=t.positionAt(r+1,u,n);e.insert(e.mapping.slice(a).map(o+b),p),u+=d.colspan-1}}}}function io(e,t){if(!D(e))return!1;if(t){const n=H(e),o=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let r=n.bottom-1;lo(o,n,r),r!=n.top;r--){const i=n.tableStart?o.doc.nodeAt(n.tableStart-1):o.doc;if(!i)throw RangeError("No table found");n.table=i,n.map=x.get(n.table)}t(o)}return!0}function so(e,t){return function(n,o){if(!D(n))return!1;const r=we(n);if(r.nodeAfter.attrs[e]===t)return!1;if(o){const i=n.tr;n.selection instanceof S?n.selection.forEachCell((l,a)=>{l.attrs[e]!==t&&i.setNodeMarkup(a,null,{...l.attrs,[e]:t})}):i.setNodeMarkup(r.pos,null,{...r.nodeAfter.attrs,[e]:t}),o(i)}return!0}}function ao(e){return function(t,n){if(!D(t))return!1;if(n){const o=F(t.schema),r=H(t),i=t.tr,l=r.map.cellsInRect(e=="column"?{left:r.left,top:0,right:r.right,bottom:r.map.height}:e=="row"?{left:0,top:r.top,right:r.map.width,bottom:r.bottom}:r),a=l.map(s=>r.table.nodeAt(s));for(let s=0;s<l.length;s++)a[s].type==o.header_cell&&i.setNodeMarkup(r.tableStart+l[s],o.cell,a[s].attrs);if(i.steps.length==0)for(let s=0;s<l.length;s++)i.setNodeMarkup(r.tableStart+l[s],o.header_cell,a[s].attrs);n(i)}return!0}}function st(e,t,n){const o=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let r=0;r<o.length;r++){const i=t.table.nodeAt(o[r]);if(i&&i.type!==n.header_cell)return!1}return!0}function Ke(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?ao(e):function(n,o){if(!D(n))return!1;if(o){const r=F(n.schema),i=H(n),l=n.tr,a=st("row",i,r),s=st("column",i,r),f=(e==="column"?a:e==="row"?s:!1)?1:0,c=e=="column"?{left:0,top:f,right:1,bottom:i.map.height}:e=="row"?{left:f,top:0,right:i.map.width,bottom:1}:i,h=e=="column"?s?r.cell:r.header_cell:e=="row"?a?r.cell:r.header_cell:r.cell;i.map.cellsInRect(c).forEach(d=>{const p=d+i.tableStart,b=l.doc.nodeAt(p);b&&l.setNodeMarkup(p,h,b.attrs)}),o(l)}return!0}}Ke("row",{useDeprecatedLogic:!0});Ke("column",{useDeprecatedLogic:!0});Ke("cell",{useDeprecatedLogic:!0});function co(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let o=e.index(-1)-1,r=e.before();o>=0;o--){const i=e.node(-1).child(o),l=i.lastChild;if(l)return r-1-l.nodeSize;r-=i.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let o=e.indexAfter(-1),r=e.after();o<n.childCount;o++){const i=n.child(o);if(i.childCount)return r+1;r+=i.nodeSize}}return null}function zt(e){return function(t,n){if(!D(t))return!1;const o=co(we(t),e);if(o==null)return!1;if(n){const r=t.doc.resolve(o);n(t.tr.setSelection(B.between(r,Kn(r))).scrollIntoView())}return!0}}function uo(e,t){const n=e.selection.$anchor;for(let o=n.depth;o>0;o--)if(n.node(o).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(o),n.after(o)).scrollIntoView()),!0;return!1}function ce(e,t){const n=e.selection;if(!(n instanceof S))return!1;if(t){const o=e.tr,r=F(e.schema).cell.createAndFill().content;n.forEachCell((i,l)=>{i.content.eq(r)||o.replace(o.mapping.map(l+1),o.mapping.map(l+i.nodeSize-1),new j(r,0,0))}),o.docChanged&&t(o)}return!0}function fo(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:o}=e;for(;t.childCount==1&&(n>0&&o>0||t.child(0).type.spec.tableRole=="table");)n--,o--,t=t.child(0).content;const r=t.child(0),i=r.type.spec.tableRole,l=r.type.schema,a=[];if(i=="row")for(let s=0;s<t.childCount;s++){let u=t.child(s).content;const f=s?0:Math.max(0,n-1),c=s<t.childCount-1?0:Math.max(0,o-1);(f||c)&&(u=Fe(F(l).row,new j(u,f,c)).content),a.push(u)}else if(i=="cell"||i=="header_cell")a.push(n||o?Fe(F(l).row,new j(t,n,o)).content:t);else return null;return ho(l,a)}function ho(e,t){const n=[];for(let r=0;r<t.length;r++){const i=t[r];for(let l=i.childCount-1;l>=0;l--){const{rowspan:a,colspan:s}=i.child(l).attrs;for(let u=r;u<r+a;u++)n[u]=(n[u]||0)+s}}let o=0;for(let r=0;r<n.length;r++)o=Math.max(o,n[r]);for(let r=0;r<n.length;r++)if(r>=t.length&&t.push(L.empty),n[r]<o){const i=F(e).cell.createAndFill(),l=[];for(let a=n[r];a<o;a++)l.push(i);t[r]=t[r].append(L.from(l))}return{height:t.length,width:o,rows:t}}function Fe(e,t){const n=e.createAndFill();return new Rn(n).replace(0,n.content.size,t).doc}function po({width:e,height:t,rows:n},o,r){if(e!=o){const i=[],l=[];for(let a=0;a<n.length;a++){const s=n[a],u=[];for(let f=i[a]||0,c=0;f<o;c++){let h=s.child(c%s.childCount);f+h.attrs.colspan>o&&(h=h.type.createChecked(K(h.attrs,h.attrs.colspan,f+h.attrs.colspan-o),h.content)),u.push(h),f+=h.attrs.colspan;for(let d=1;d<h.attrs.rowspan;d++)i[a+d]=(i[a+d]||0)+h.attrs.colspan}l.push(L.from(u))}n=l,e=o}if(t!=r){const i=[];for(let l=0,a=0;l<r;l++,a++){const s=[],u=n[a%t];for(let f=0;f<u.childCount;f++){let c=u.child(f);l+c.attrs.rowspan>r&&(c=c.type.create({...c.attrs,rowspan:Math.max(1,r-c.attrs.rowspan)},c.content)),s.push(c)}i.push(L.from(s))}n=i,t=r}return{width:e,height:t,rows:n}}function mo(e,t,n,o,r,i,l){const a=e.doc.type.schema,s=F(a);let u,f;if(r>t.width)for(let c=0,h=0;c<t.height;c++){const d=n.child(c);h+=d.nodeSize;const p=[];let b;d.lastChild==null||d.lastChild.type==s.cell?b=u||(u=s.cell.createAndFill()):b=f||(f=s.header_cell.createAndFill());for(let w=t.width;w<r;w++)p.push(b);e.insert(e.mapping.slice(l).map(h-1+o),p)}if(i>t.height){const c=[];for(let p=0,b=(t.height-1)*t.width;p<Math.max(t.width,r);p++){const w=p>=t.width?!1:n.nodeAt(t.map[b+p]).type==s.header_cell;c.push(w?f||(f=s.header_cell.createAndFill()):u||(u=s.cell.createAndFill()))}const h=s.row.create(null,L.from(c)),d=[];for(let p=t.height;p<i;p++)d.push(h);e.insert(e.mapping.slice(l).map(o+n.nodeSize-2),d)}return!!(u||f)}function at(e,t,n,o,r,i,l,a){if(l==0||l==t.height)return!1;let s=!1;for(let u=r;u<i;u++){const f=l*t.width+u,c=t.map[f];if(t.map[f-t.width]==c){s=!0;const h=n.nodeAt(c),{top:d,left:p}=t.findCell(c);e.setNodeMarkup(e.mapping.slice(a).map(c+o),null,{...h.attrs,rowspan:l-d}),e.insert(e.mapping.slice(a).map(t.positionAt(l,p,n)),h.type.createAndFill({...h.attrs,rowspan:d+h.attrs.rowspan-l})),u+=h.attrs.colspan-1}}return s}function ct(e,t,n,o,r,i,l,a){if(l==0||l==t.width)return!1;let s=!1;for(let u=r;u<i;u++){const f=u*t.width+l,c=t.map[f];if(t.map[f-1]==c){s=!0;const h=n.nodeAt(c),d=t.colCount(c),p=e.mapping.slice(a).map(c+o);e.setNodeMarkup(p,null,K(h.attrs,l-d,h.attrs.colspan-(l-d))),e.insert(p+h.nodeSize,h.type.createAndFill(K(h.attrs,0,l-d))),u+=h.attrs.rowspan-1}}return s}function ut(e,t,n,o,r){let i=n?e.doc.nodeAt(n-1):e.doc;if(!i)throw new Error("No table found");let l=x.get(i);const{top:a,left:s}=o,u=s+r.width,f=a+r.height,c=e.tr;let h=0;function d(){if(i=n?c.doc.nodeAt(n-1):c.doc,!i)throw new Error("No table found");l=x.get(i),h=c.mapping.maps.length}mo(c,l,i,n,u,f,h)&&d(),at(c,l,i,n,s,u,a,h)&&d(),at(c,l,i,n,s,u,f,h)&&d(),ct(c,l,i,n,a,f,s,h)&&d(),ct(c,l,i,n,a,f,u,h)&&d();for(let p=a;p<f;p++){const b=l.positionAt(p,s,i),w=l.positionAt(p,u,i);c.replace(c.mapping.slice(h).map(b+n),c.mapping.slice(h).map(w+n),new j(r.rows[p-a],0,0))}d(),c.setSelection(new S(c.doc.resolve(n+l.positionAt(a,s,i)),c.doc.resolve(n+l.positionAt(f-1,u-1,i)))),t(c)}var go=Sn({ArrowLeft:ue("horiz",-1),ArrowRight:ue("horiz",1),ArrowUp:ue("vert",-1),ArrowDown:ue("vert",1),"Shift-ArrowLeft":fe("horiz",-1),"Shift-ArrowRight":fe("horiz",1),"Shift-ArrowUp":fe("vert",-1),"Shift-ArrowDown":fe("vert",1),Backspace:ce,"Mod-Backspace":ce,Delete:ce,"Mod-Delete":ce});function de(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function ue(e,t){return(n,o,r)=>{if(!r)return!1;const i=n.selection;if(i instanceof S)return de(n,o,v.near(i.$headCell,t));if(e!="horiz"&&!i.empty)return!1;const l=Et(r,e,t);if(l==null)return!1;if(e=="horiz")return de(n,o,v.near(n.doc.resolve(i.head+t),t));{const a=n.doc.resolve(l),s=Nt(a,e,t);let u;return s?u=v.near(s,1):t<0?u=v.near(n.doc.resolve(a.before(-1)),-1):u=v.near(n.doc.resolve(a.after(-1)),1),de(n,o,u)}}}function fe(e,t){return(n,o,r)=>{if(!r)return!1;const i=n.selection;let l;if(i instanceof S)l=i;else{const s=Et(r,e,t);if(s==null)return!1;l=new S(n.doc.resolve(s))}const a=Nt(l.$headCell,e,t);return a?de(n,o,new S(l.$anchorCell,a)):!1}}function bo(e,t){const n=e.state.doc,o=be(n.resolve(t));return o?(e.dispatch(e.state.tr.setSelection(new S(o))),!0):!1}function wo(e,t,n){if(!D(e.state))return!1;let o=fo(n);const r=e.state.selection;if(r instanceof S){o||(o={width:1,height:1,rows:[L.from(Fe(F(e.state.schema).cell,n))]});const i=r.$anchorCell.node(-1),l=r.$anchorCell.start(-1),a=x.get(i).rectBetween(r.$anchorCell.pos-l,r.$headCell.pos-l);return o=po(o,a.right-a.left,a.bottom-a.top),ut(e.state,e.dispatch,l,a,o),!0}else if(o){const i=we(e.state),l=i.start(-1);return ut(e.state,e.dispatch,l,x.get(i.node(-1)).findCell(i.pos-l),o),!0}else return!1}function ko(e,t){var n;if(t.ctrlKey||t.metaKey)return;const o=ft(e,t.target);let r;if(t.shiftKey&&e.state.selection instanceof S)i(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&o&&(r=be(e.state.selection.$anchor))!=null&&((n=xe(e,t))==null?void 0:n.pos)!=r.pos)i(r,t),t.preventDefault();else if(!o)return;function i(s,u){let f=xe(e,u);const c=$.getState(e.state)==null;if(!f||!We(s,f))if(c)f=s;else return;const h=new S(s,f);if(c||!e.state.selection.eq(h)){const d=e.state.tr.setSelection(h);c&&d.setMeta($,s.pos),e.dispatch(d)}}function l(){e.root.removeEventListener("mouseup",l),e.root.removeEventListener("dragstart",l),e.root.removeEventListener("mousemove",a),$.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta($,-1))}function a(s){const u=s,f=$.getState(e.state);let c;if(f!=null)c=e.state.doc.resolve(f);else if(ft(e,u.target)!=o&&(c=xe(e,t),!c))return l();c&&i(c,u)}e.root.addEventListener("mouseup",l),e.root.addEventListener("dragstart",l),e.root.addEventListener("mousemove",a)}function Et(e,t,n){if(!(e.state.selection instanceof B))return null;const{$head:o}=e.state.selection;for(let r=o.depth-1;r>=0;r--){const i=o.node(r);if((n<0?o.index(r):o.indexAfter(r))!=(n<0?0:i.childCount))return null;if(i.type.spec.tableRole=="cell"||i.type.spec.tableRole=="header_cell"){const a=o.before(r),s=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(s)?a:null}}return null}function ft(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function xe(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?be(e.state.doc.resolve(n.pos)):null}new ne("tableColumnResizing");function Co({allowTableNodeSelection:e=!1}={}){return new Le({key:$,state:{init(){return null},apply(t,n){const o=t.getMeta($);if(o!=null)return o==-1?null:o;if(n==null||!t.docChanged)return n;const{deleted:r,pos:i}=t.mapping.mapResult(n);return r?null:i}},props:{decorations:Un,handleDOMEvents:{mousedown:ko},createSelectionBetween(t){return $.getState(t.state)!=null?t.state.selection:null},handleTripleClick:bo,handleKeyDown:go,handlePaste:wo},appendTransaction(t,n,o){return Zn(o,Yn(o,n),e)}})}const le=Hn({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:e=>e.style.textAlign||"left",setDOMAttr:(e,t)=>{t.style=`text-align: ${e||"left"}`}}}}),Q=G("table",()=>({...le.table,content:"table_header_row table_row+",disableDropCursor:!0,parseMarkdown:{match:e=>e.type==="table",runner:(e,t,n)=>{const o=t.align,r=t.children.map((i,l)=>({...i,align:o,isHeader:l===0}));e.openNode(n),e.next(r),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table",runner:(e,t)=>{var r;const n=(r=t.content.firstChild)==null?void 0:r.content;if(!n)return;const o=[];n.forEach(i=>{o.push(i.attrs.alignment)}),e.openNode("table",void 0,{align:o}),e.next(t.content),e.closeNode()}}}));k(Q.node,{displayName:"NodeSchema<table>",group:"Table"});k(Q.ctx,{displayName:"NodeSchemaCtx<table>",group:"Table"});const ke=G("table_header_row",()=>({...le.table_row,disableDropCursor:!0,content:"(table_header)*",parseDOM:[{tag:"tr[data-is-header]"}],toDOM(){return["tr",{"data-is-header":!0},0]},parseMarkdown:{match:e=>!!(e.type==="tableRow"&&e.isHeader),runner:(e,t,n)=>{const o=t.align,r=t.children.map((i,l)=>({...i,align:o[l],isHeader:t.isHeader}));e.openNode(n),e.next(r),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table_header_row",runner:(e,t)=>{e.openNode("tableRow",void 0,{isHeader:!0}),e.next(t.content),e.closeNode()}}}));k(ke.node,{displayName:"NodeSchema<tableHeaderRow>",group:"Table"});k(ke.ctx,{displayName:"NodeSchemaCtx<tableHeaderRow>",group:"Table"});const ie=G("table_row",()=>({...le.table_row,disableDropCursor:!0,content:"(table_cell)*",parseMarkdown:{match:e=>e.type==="tableRow",runner:(e,t,n)=>{const o=t.align,r=t.children.map((i,l)=>({...i,align:o[l]}));e.openNode(n),e.next(r),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table_row",runner:(e,t)=>{e.openNode("tableRow"),e.next(t.content),e.closeNode()}}}));k(ie.node,{displayName:"NodeSchema<tableRow>",group:"Table"});k(ie.ctx,{displayName:"NodeSchemaCtx<tableRow>",group:"Table"});const se=G("table_cell",()=>({...le.table_cell,disableDropCursor:!0,parseMarkdown:{match:e=>e.type==="tableCell"&&!e.isHeader,runner:(e,t,n)=>{const o=t.align;e.openNode(n,{alignment:o}).openNode(e.schema.nodes.paragraph).next(t.children).closeNode().closeNode()}},toMarkdown:{match:e=>e.type.name==="table_cell",runner:(e,t)=>{e.openNode("tableCell").next(t.content).closeNode()}}}));k(se.node,{displayName:"NodeSchema<tableCell>",group:"Table"});k(se.ctx,{displayName:"NodeSchemaCtx<tableCell>",group:"Table"});const Ce=G("table_header",()=>({...le.table_header,disableDropCursor:!0,parseMarkdown:{match:e=>e.type==="tableCell"&&!!e.isHeader,runner:(e,t,n)=>{const o=t.align;e.openNode(n,{alignment:o}),e.openNode(e.schema.nodes.paragraph),e.next(t.children),e.closeNode(),e.closeNode()}},toMarkdown:{match:e=>e.type.name==="table_header",runner:(e,t)=>{e.openNode("tableCell"),e.next(t.content),e.closeNode()}}}));k(Ce.node,{displayName:"NodeSchema<tableHeader>",group:"Table"});k(Ce.ctx,{displayName:"NodeSchemaCtx<tableHeader>",group:"Table"});function It(e,t=3,n=3){const o=Array(n).fill(0).map(()=>se.type(e).createAndFill()),r=Array(n).fill(0).map(()=>Ce.type(e).createAndFill()),i=Array(t).fill(0).map((l,a)=>a===0?ke.type(e).create(null,r):ie.type(e).create(null,o));return Q.type(e).create(null,i)}function ae(e){return At(t=>t.type.spec.tableRole==="table")(e)}function q(e,t){const n=ae(t.$from);if(!n)return;const o=x.get(n.node);if(!(e<0||e>=o.width))return o.cellsInRect({left:e,right:e+1,top:0,bottom:o.height}).map(r=>{const i=n.node.nodeAt(r);if(!i)return;const l=r+n.start;return{pos:l,start:l+1,node:i}}).filter(r=>r!=null)}function U(e,t){const n=ae(t.$from);if(!n)return;const o=x.get(n.node);if(!(e<0||e>=o.height))return o.cellsInRect({left:0,right:o.width,top:e,bottom:e+1}).map(r=>{const i=n.node.nodeAt(r);if(!i)return;const l=r+n.start;return{pos:l,start:l+1,node:i}}).filter(r=>r!=null)}function yo(e){const t=ae(e.$from);if(!t)return;const n=x.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map(r=>{const i=t.node.nodeAt(r),l=r+t.start;return{pos:l,start:l+1,node:i}})}function xo(e){const t=yo(e.selection);if(t&&t[0]){const n=e.doc.resolve(t[0].pos),o=t[t.length-1];if(o){const r=e.doc.resolve(o.pos);return ge(e.setSelection(new S(r,n)))}}return e}function Lt(e,t,{map:n,tableStart:o,table:r},i){const l=Array(i).fill(0).reduce((s,u,f)=>s+r.child(f).nodeSize,o),a=Array(n.width).fill(0).map((s,u)=>{const f=r.nodeAt(n.map[u]);return se.type(e).createAndFill({alignment:f==null?void 0:f.attrs.alignment})});return t.insert(l,ie.type(e).create(null,a)),t}function _t(e){return(t,n)=>o=>{n=n??o.selection.from;const r=o.doc.resolve(n),i=At(s=>s.type.name==="table")(r),l=i?{node:i.node,from:i.start}:void 0,a=e==="row";if(l){const s=x.get(l.node);if(t>=0&&t<(a?s.height:s.width)){const u=s.positionAt(a?t:s.height-1,a?s.width-1:t,l.node),f=o.doc.resolve(l.from+u),c=a?S.rowSelection:S.colSelection,h=s.positionAt(a?t:0,a?0:t,l.node),d=o.doc.resolve(l.from+h);return ge(o.setSelection(c(f,d)))}}return o}}const So=_t("row"),Ao=_t("col");function ht(e){return e[0].map((t,n)=>e.map(o=>o[n]))}function Pt(e,t){const n=[],o=x.get(e);for(let i=0;i<o.height;i++){const l=e.child(i),a=[];for(let s=0;s<o.width;s++){if(!t[i][s])continue;const u=o.map[i*o.width+s],f=t[i][s],h=e.nodeAt(u).type.createChecked(Object.assign({},f.attrs),f.content,f.marks);a.push(h)}n.push(l.type.createChecked(l.attrs,a,l.marks))}return e.type.createChecked(e.attrs,n,e.marks)}function Ot(e){const t=x.get(e),n=[];for(let o=0;o<t.height;o++){const r=[],i={};for(let l=0;l<t.width;l++){const a=t.map[o*t.width+l],s=e.nodeAt(a),u=t.findCell(a);if(i[a]||u.top!==o){r.push(null);continue}i[a]=!0,r.push(s)}n.push(r)}return n}function $t(e,t,n,o){const r=t[0]>n[0]?-1:1,i=e.splice(t[0],t.length),l=i.length%2===0?1:0;let a;return a=r===-1?n[0]:n[n.length-1]-l,e.splice(a,0,...i),e}function Ro(e,t,n,o){let r=ht(Ot(e.node));return r=$t(r,t,n),r=ht(r),Pt(e.node,r)}function To(e,t,n,o){let r=Ot(e.node);return r=$t(r,t,n),Pt(e.node,r)}function pt(e,t){let n=e,o=e;for(let f=e;f>=0;f--){const c=q(f,t.selection);c&&c.forEach(h=>{const d=h.node.attrs.colspan+f-1;d>=n&&(n=f),d>o&&(o=d)})}for(let f=e;f<=o;f++){const c=q(f,t.selection);c&&c.forEach(h=>{const d=h.node.attrs.colspan+f-1;h.node.attrs.colspan>1&&d>o&&(o=d)})}const r=[];for(let f=n;f<=o;f++){const c=q(f,t.selection);c&&c.length&&r.push(f)}n=r[0],o=r[r.length-1];const i=q(n,t.selection),l=U(0,t.selection),a=t.doc.resolve(i[i.length-1].pos);let s;for(let f=o;f>=n;f--){const c=q(f,t.selection);if(c&&c.length){for(let h=l.length-1;h>=0;h--)if(l[h].pos===c[0].pos){s=c[0];break}if(s)break}}const u=t.doc.resolve(s.pos);return{$anchor:a,$head:u,indexes:r}}function dt(e,t){let n=e,o=e;for(let f=e;f>=0;f--)U(f,t.selection).forEach(h=>{const d=h.node.attrs.rowspan+f-1;d>=n&&(n=f),d>o&&(o=d)});for(let f=e;f<=o;f++)U(f,t.selection).forEach(h=>{const d=h.node.attrs.rowspan+f-1;h.node.attrs.rowspan>1&&d>o&&(o=d)});const r=[];for(let f=n;f<=o;f++){const c=U(f,t.selection);c&&c.length&&r.push(f)}n=r[0],o=r[r.length-1];const i=U(n,t.selection),l=q(0,t.selection),a=t.doc.resolve(i[i.length-1].pos);let s;for(let f=o;f>=n;f--){const c=U(f,t.selection);if(c&&c.length){for(let h=l.length-1;h>=0;h--)if(l[h].pos===c[0].pos){s=c[0];break}if(s)break}}const u=t.doc.resolve(s.pos);return{$anchor:a,$head:u,indexes:r}}function Mo(e){const{tr:t,origin:n,target:o,select:r=!0,pos:i}=e,l=i!=null?t.doc.resolve(i):t.selection.$from,a=ae(l);if(!a)return t;const{indexes:s}=pt(n,t),{indexes:u}=pt(o,t);if(s.includes(o))return t;const f=Ro(a,s,u),c=ge(t).replaceWith(a.pos,a.pos+a.node.nodeSize,f);if(!r)return c;const h=x.get(f),d=a.start,p=o,b=h.positionAt(h.height-1,p,f),w=c.doc.resolve(d+b),g=S.colSelection,C=h.positionAt(0,p,f),y=c.doc.resolve(d+C);return c.setSelection(g(w,y))}function No(e){const{tr:t,origin:n,target:o,select:r=!0,pos:i}=e,l=i!=null?t.doc.resolve(i):t.selection.$from,a=ae(l);if(!a)return t;const{indexes:s}=dt(n,t),{indexes:u}=dt(o,t);if(s.includes(o))return t;const f=To(a,s,u),c=ge(t).replaceWith(a.pos,a.pos+a.node.nodeSize,f);if(!r)return c;const h=x.get(f),d=a.start,p=o,b=h.positionAt(p,h.width-1,f),w=c.doc.resolve(d+b),g=S.rowSelection,C=h.positionAt(p,0,f),y=c.doc.resolve(d+C);return c.setSelection(g(w,y))}const Ge=M("GoToPrevTableCell",()=>()=>zt(-1));k(Ge,{displayName:"Command<goToPrevTableCellCommand>",group:"Table"});const Ve=M("GoToNextTableCell",()=>()=>zt(1));k(Ve,{displayName:"Command<goToNextTableCellCommand>",group:"Table"});const qe=M("ExitTable",e=>()=>(t,n)=>{if(!D(t))return!1;const{$head:o}=t.selection,r=Pn(o,Q.type(e));if(!r)return!1;const{to:i}=r,l=t.tr.replaceWith(i,i,Tn.type(e).createAndFill());return l.setSelection(v.near(l.doc.resolve(i),1)).scrollIntoView(),n==null||n(l),!0});k(qe,{displayName:"Command<breakTableCommand>",group:"Table"});const Bt=M("InsertTable",e=>({row:t,col:n}={})=>(o,r)=>{const{selection:i,tr:l}=o,{from:a}=i,s=It(e,t,n),u=l.replaceSelectionWith(s),f=v.findFrom(u.doc.resolve(a),1,!0);return f&&u.setSelection(f),r==null||r(u),!0});k(Bt,{displayName:"Command<insertTableCommand>",group:"Table"});const jt=M("MoveRow",()=>({from:e,to:t,pos:n}={})=>(o,r)=>{const{tr:i}=o;return!!(r==null?void 0:r(No({tr:i,origin:e??0,target:t??0,pos:n,select:!0})))});k(jt,{displayName:"Command<moveRowCommand>",group:"Table"});const Ht=M("MoveCol",()=>({from:e,to:t,pos:n}={})=>(o,r)=>{const{tr:i}=o;return!!(r==null?void 0:r(Mo({tr:i,origin:e??0,target:t??0,pos:n,select:!0})))});k(Ht,{displayName:"Command<moveColCommand>",group:"Table"});const Wt=M("SelectRow",()=>(e={index:0})=>(t,n)=>{const{tr:o}=t;return!!(n==null?void 0:n(So(e.index,e.pos)(o)))});k(Wt,{displayName:"Command<selectRowCommand>",group:"Table"});const Kt=M("SelectCol",()=>(e={index:0})=>(t,n)=>{const{tr:o}=t;return!!(n==null?void 0:n(Ao(e.index,e.pos)(o)))});k(Kt,{displayName:"Command<selectColCommand>",group:"Table"});const Gt=M("SelectTable",()=>()=>(e,t)=>{const{tr:n}=e;return!!(t==null?void 0:t(xo(n)))});k(Gt,{displayName:"Command<selectTableCommand>",group:"Table"});const Vt=M("DeleteSelectedCells",()=>()=>(e,t)=>{const{selection:n}=e;if(!(n instanceof S))return!1;const o=n.isRowSelection(),r=n.isColSelection();return o&&r?uo(e,t):r?ro(e,t):io(e,t)});k(Vt,{displayName:"Command<deleteSelectedCellsCommand>",group:"Table"});const qt=M("AddColBefore",()=>()=>to);k(qt,{displayName:"Command<addColBeforeCommand>",group:"Table"});const Ut=M("AddColAfter",()=>()=>no);k(Ut,{displayName:"Command<addColAfterCommand>",group:"Table"});const Jt=M("AddRowBefore",e=>()=>(t,n)=>{if(!D(t))return!1;if(n){const o=H(t);n(Lt(e,t.tr,o,o.top))}return!0});k(Jt,{displayName:"Command<addRowBeforeCommand>",group:"Table"});const Xt=M("AddRowAfter",e=>()=>(t,n)=>{if(!D(t))return!1;if(n){const o=H(t);n(Lt(e,t.tr,o,o.bottom))}return!0});k(Xt,{displayName:"Command<addRowAfterCommand>",group:"Table"});const Zt=M("SetAlign",()=>(e="left")=>so("alignment",e));k(Zt,{displayName:"Command<setAlignCommand>",group:"Table"});const Qt=Ie(e=>new Rt(/^\|(?<col>\d+)[xX](?<row>\d+)\|\s$/,(t,n,o,r)=>{var s,u;const i=t.doc.resolve(o);if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),Q.type(e)))return null;const l=It(e,Number((s=n.groups)==null?void 0:s.row),Number((u=n.groups)==null?void 0:u.col)),a=t.tr.replaceRangeWith(o,r,l);return a.setSelection(B.create(a.doc,o+3)).scrollIntoView()}));k(Qt,{displayName:"InputRule<insertTableInputRule>",group:"Table"});const Ue=yt("tableKeymap",{NextCell:{shortcuts:["Mod-]","Tab"],command:e=>{const t=e.get(pe);return()=>t.call(Ve.key)}},PrevCell:{shortcuts:["Mod-[","Shift-Tab"],command:e=>{const t=e.get(pe);return()=>t.call(Ge.key)}},ExitTable:{shortcuts:["Mod-Enter"],command:e=>{const t=e.get(pe);return()=>t.call(qe.key)}}});k(Ue.ctx,{displayName:"KeymapCtx<table>",group:"Table"});k(Ue.shortcuts,{displayName:"Keymap<table>",group:"Table"});const Se="footnote_definition",mt="footnoteDefinition",Je=G("footnote_definition",()=>({group:"block",content:"block+",defining:!0,attrs:{label:{default:""}},parseDOM:[{tag:`dl[data-type="${Se}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw _e(e);return{label:e.dataset.label}},contentElement:"dd"}],toDOM:e=>{const t=e.attrs.label;return["dl",{"data-label":t,"data-type":Se},["dt",t],["dd",0]]},parseMarkdown:{match:({type:e})=>e===mt,runner:(e,t,n)=>{e.openNode(n,{label:t.label}).next(t.children).closeNode()}},toMarkdown:{match:e=>e.type.name===Se,runner:(e,t)=>{e.openNode(mt,void 0,{label:t.attrs.label,identifier:t.attrs.label}).next(t.content).closeNode()}}}));k(Je.ctx,{displayName:"NodeSchemaCtx<footnodeDef>",group:"footnote"});k(Je.node,{displayName:"NodeSchema<footnodeDef>",group:"footnote"});const Ae="footnote_reference",Xe=G("footnote_reference",()=>({group:"inline",inline:!0,atom:!0,attrs:{label:{default:""}},parseDOM:[{tag:`sup[data-type="${Ae}"]`,getAttrs:e=>{if(!(e instanceof HTMLElement))throw _e(e);return{label:e.dataset.label}}}],toDOM:e=>{const t=e.attrs.label;return["sup",{"data-label":t,"data-type":Ae},t]},parseMarkdown:{match:({type:e})=>e==="footnoteReference",runner:(e,t,n)=>{e.addNode(n,{label:t.label})}},toMarkdown:{match:e=>e.type.name===Ae,runner:(e,t)=>{e.addNode("footnoteReference",void 0,void 0,{label:t.attrs.label,identifier:t.attrs.label})}}}));k(Xe.ctx,{displayName:"NodeSchemaCtx<footnodeRef>",group:"footnote"});k(Xe.node,{displayName:"NodeSchema<footnodeRef>",group:"footnote"});const Yt=Mn.extendSchema(e=>t=>{const n=e(t);return{...n,attrs:{...n.attrs,checked:{default:null}},parseDOM:[{tag:'li[data-item-type="task"]',getAttrs:o=>{if(!(o instanceof HTMLElement))throw _e(o);return{label:o.dataset.label,listType:o.dataset.listType,spread:o.dataset.spread,checked:o.dataset.checked?o.dataset.checked==="true":null}}},...(n==null?void 0:n.parseDOM)||[]],toDOM:o=>n.toDOM&&o.attrs.checked==null?n.toDOM(o):["li",{"data-item-type":"task","data-label":o.attrs.label,"data-list-type":o.attrs.listType,"data-spread":o.attrs.spread,"data-checked":o.attrs.checked},0],parseMarkdown:{match:({type:o})=>o==="listItem",runner:(o,r,i)=>{if(r.checked==null){n.parseMarkdown.runner(o,r,i);return}const l=r.label!=null?`${r.label}.`:"•",a=r.checked!=null?!!r.checked:null,s=r.label!=null?"ordered":"bullet",u=r.spread!=null?`${r.spread}`:"true";o.openNode(i,{label:l,listType:s,spread:u,checked:a}),o.next(r.children),o.closeNode()}},toMarkdown:{match:o=>o.type.name==="list_item",runner:(o,r)=>{if(r.attrs.checked==null){n.toMarkdown.runner(o,r);return}const i=r.attrs.label,l=r.attrs.listType,a=r.attrs.spread==="true",s=r.attrs.checked;o.openNode("listItem",void 0,{label:i,listType:l,spread:a,checked:s}),o.next(r.content),o.closeNode()}}}});k(Yt,{displayName:"NodeSchema<listItem>",group:"ListItem"});const en=Ie(()=>new Rt(/^\[(?<checked>\s|x)\]\s$/,(e,t,n,o)=>{var f;const r=e.doc.resolve(n);let i=0,l=r.node(i);for(;l&&l.type.name!=="list_item";)i--,l=r.node(i);if(!l||l.attrs.checked!=null)return null;const a=((f=t.groups)==null?void 0:f.checked)==="x",s=r.before(i),u=e.tr;return u.deleteRange(n,o).setNodeMarkup(s,void 0,{...l.attrs,checked:a}),u}));k(en,{displayName:"InputRule<wrapInTaskListInputRule>",group:"ListItem"});const Do=[He,Ue].flat(),vo=[Qt,en],Fo=[Mt];var me=typeof navigator<"u"?navigator:null,Ze=me&&me.userAgent||"",zo=/Edge\/(\d+)/.exec(Ze),Eo=/MSIE \d/.exec(Ze),Io=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ze),Lo=!!(Eo||Io||zo),_o=!Lo&&!!me&&/Apple Computer/.test(me.vendor),tn=new ne("safari-ime-span"),ze=!1,Po={key:tn,props:{decorations:Oo,handleDOMEvents:{compositionstart:()=>{ze=!0},compositionend:()=>{ze=!1}}}};function Oo(e){const{$from:t,$to:n,to:o}=e.selection;if(ze&&t.sameParent(n)){const r=xt.widget(o,$o,{ignoreSelection:!0,key:"safari-ime-span"});return St.create(e.doc,[r])}}function $o(e){const t=e.dom.ownerDocument.createElement("span");return t.className="ProseMirror-safari-ime-span",t}var Bo=new Le(_o?Po:{key:tn});const nn=Pe(()=>Bo);k(nn,{displayName:"Prose<autoInsertSpanPlugin>",group:"Prose"});const on=Pe(()=>Co({allowTableNodeSelection:!0}));k(on,{displayName:"Prose<tableEditingPlugin>",group:"Prose"});function gt(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let o=0,r=n.indexOf(t);for(;r!==-1;)o++,r=n.indexOf(t,r+t.length);return o}function jo(e,t,n){const r=Nn((n||{}).ignore||[]),i=Ho(t);let l=-1;for(;++l<i.length;)Dn(e,"text",a);function a(u,f){let c=-1,h;for(;++c<f.length;){const d=f[c],p=h?h.children:void 0;if(r(d,p?p.indexOf(d):void 0,h))return;h=d}if(h)return s(u,f)}function s(u,f){const c=f[f.length-1],h=i[l][0],d=i[l][1];let p=0;const w=c.children.indexOf(u);let g=!1,C=[];h.lastIndex=0;let y=h.exec(u.value);for(;y;){const T=y.index,A={index:y.index,input:y.input,stack:[...f,u]};let R=d(...y,A);if(typeof R=="string"&&(R=R.length>0?{type:"text",value:R}:void 0),R===!1?h.lastIndex=T+1:(p!==T&&C.push({type:"text",value:u.value.slice(p,T)}),Array.isArray(R)?C.push(...R):R&&C.push(R),p=T+y[0].length,g=!0),!h.global)break;y=h.exec(u.value)}return g?(p<u.value.length&&C.push({type:"text",value:u.value.slice(p)}),c.children.splice(w,1,...C)):C=[u],w+C.length}}function Ho(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let o=-1;for(;++o<n.length;){const r=n[o];t.push([Wo(r[0]),Ko(r[1])])}return t}function Wo(e){return typeof e=="string"?new RegExp(vn(e),"g"):e}function Ko(e){return typeof e=="function"?e:function(){return e}}const Re="phrasing",Te=["autolink","link","image","label"];function Go(){return{transforms:[Qo],enter:{literalAutolink:qo,literalAutolinkEmail:Me,literalAutolinkHttp:Me,literalAutolinkWww:Me},exit:{literalAutolink:Zo,literalAutolinkEmail:Xo,literalAutolinkHttp:Uo,literalAutolinkWww:Jo}}}function Vo(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Re,notInConstruct:Te},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Re,notInConstruct:Te},{character:":",before:"[ps]",after:"\\/",inConstruct:Re,notInConstruct:Te}]}}function qo(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Me(e){this.config.enter.autolinkProtocol.call(this,e)}function Uo(e){this.config.exit.autolinkProtocol.call(this,e)}function Jo(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];Z(t.type==="link"),t.url="http://"+this.sliceSerialize(e)}function Xo(e){this.config.exit.autolinkEmail.call(this,e)}function Zo(e){this.exit(e)}function Qo(e){jo(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Yo],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),er]],{ignore:["link","linkReference"]})}function Yo(e,t,n,o,r){let i="";if(!rn(r)||(/^w/i.test(t)&&(n=t+n,t="",i="http://"),!tr(n)))return!1;const l=nr(n+o);if(!l[0])return!1;const a={type:"link",title:null,url:i+t+l[0],children:[{type:"text",value:t+l[0]}]};return l[1]?[a,{type:"text",value:l[1]}]:a}function er(e,t,n,o){return!rn(o,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function tr(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function nr(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],o=n.indexOf(")");const r=gt(e,"(");let i=gt(e,")");for(;o!==-1&&r>i;)e+=n.slice(0,o+1),n=n.slice(o+1),o=n.indexOf(")"),i++;return[e,n]}function rn(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||X(n)||Oe(n))&&(!t||n!==47)}ln.peek=pr;function or(){return{enter:{gfmFootnoteDefinition:lr,gfmFootnoteDefinitionLabelString:ir,gfmFootnoteCall:cr,gfmFootnoteCallString:ur},exit:{gfmFootnoteDefinition:ar,gfmFootnoteDefinitionLabelString:sr,gfmFootnoteCall:hr,gfmFootnoteCallString:fr}}}function rr(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:dr,footnoteReference:ln}}}function lr(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function ir(){this.buffer()}function sr(e){const t=this.resume(),n=this.stack[this.stack.length-1];Z(n.type==="footnoteDefinition"),n.label=t,n.identifier=oe(this.sliceSerialize(e)).toLowerCase()}function ar(e){this.exit(e)}function cr(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function ur(){this.buffer()}function fr(e){const t=this.resume(),n=this.stack[this.stack.length-1];Z(n.type==="footnoteReference"),n.label=t,n.identifier=oe(this.sliceSerialize(e)).toLowerCase()}function hr(e){this.exit(e)}function ln(e,t,n,o){const r=n.createTracker(o);let i=r.move("[^");const l=n.enter("footnoteReference"),a=n.enter("reference");return i+=r.move(n.safe(n.associationId(e),{...r.current(),before:i,after:"]"})),a(),l(),i+=r.move("]"),i}function pr(){return"["}function dr(e,t,n,o){const r=n.createTracker(o);let i=r.move("[^");const l=n.enter("footnoteDefinition"),a=n.enter("label");return i+=r.move(n.safe(n.associationId(e),{...r.current(),before:i,after:"]"})),a(),i+=r.move("]:"+(e.children&&e.children.length>0?" ":"")),r.shift(4),i+=r.move(n.indentLines(n.containerFlow(e,r.current()),mr)),l(),i}function mr(e,t,n){return t===0?e:(n?"":"    ")+e}const gr=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];sn.peek=yr;function br(){return{canContainEols:["delete"],enter:{strikethrough:kr},exit:{strikethrough:Cr}}}function wr(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:gr}],handlers:{delete:sn}}}function kr(e){this.enter({type:"delete",children:[]},e)}function Cr(e){this.exit(e)}function sn(e,t,n,o){const r=n.createTracker(o),i=n.enter("strikethrough");let l=r.move("~~");return l+=n.containerPhrasing(e,{...r.current(),before:l,after:"~"}),l+=r.move("~~"),i(),l}function yr(){return"~"}function xr(e){return e.length}function Sr(e,t){const n=t||{},o=(n.align||[]).concat(),r=n.stringLength||xr,i=[],l=[],a=[],s=[];let u=0,f=-1;for(;++f<e.length;){const b=[],w=[];let g=-1;for(e[f].length>u&&(u=e[f].length);++g<e[f].length;){const C=Ar(e[f][g]);if(n.alignDelimiters!==!1){const y=r(C);w[g]=y,(s[g]===void 0||y>s[g])&&(s[g]=y)}b.push(C)}l[f]=b,a[f]=w}let c=-1;if(typeof o=="object"&&"length"in o)for(;++c<u;)i[c]=bt(o[c]);else{const b=bt(o);for(;++c<u;)i[c]=b}c=-1;const h=[],d=[];for(;++c<u;){const b=i[c];let w="",g="";b===99?(w=":",g=":"):b===108?w=":":b===114&&(g=":");let C=n.alignDelimiters===!1?1:Math.max(1,s[c]-w.length-g.length);const y=w+"-".repeat(C)+g;n.alignDelimiters!==!1&&(C=w.length+C+g.length,C>s[c]&&(s[c]=C),d[c]=C),h[c]=y}l.splice(1,0,h),a.splice(1,0,d),f=-1;const p=[];for(;++f<l.length;){const b=l[f],w=a[f];c=-1;const g=[];for(;++c<u;){const C=b[c]||"";let y="",T="";if(n.alignDelimiters!==!1){const A=s[c]-(w[c]||0),R=i[c];R===114?y=" ".repeat(A):R===99?A%2?(y=" ".repeat(A/2+.5),T=" ".repeat(A/2-.5)):(y=" ".repeat(A/2),T=y):T=" ".repeat(A)}n.delimiterStart!==!1&&!c&&g.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&C==="")&&(n.delimiterStart!==!1||c)&&g.push(" "),n.alignDelimiters!==!1&&g.push(y),g.push(C),n.alignDelimiters!==!1&&g.push(T),n.padding!==!1&&g.push(" "),(n.delimiterEnd!==!1||c!==u-1)&&g.push("|")}p.push(n.delimiterEnd===!1?g.join("").replace(/ +$/,""):g.join(""))}return p.join(`
`)}function Ar(e){return e==null?"":String(e)}function bt(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function Rr(){return{enter:{table:Tr,tableData:wt,tableHeader:wt,tableRow:Nr},exit:{codeText:Dr,table:Mr,tableData:Ne,tableHeader:Ne,tableRow:Ne}}}function Tr(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function Mr(e){this.exit(e),this.data.inTable=void 0}function Nr(e){this.enter({type:"tableRow",children:[]},e)}function Ne(e){this.exit(e)}function wt(e){this.enter({type:"tableCell",children:[]},e)}function Dr(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,vr));const n=this.stack[this.stack.length-1];Z(n.type==="inlineCode"),n.value=t,this.exit(e)}function vr(e,t){return t==="|"?t:e}function Fr(e){const t=e||{},n=t.tableCellPadding,o=t.tablePipeAlign,r=t.stringLength,i=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:l,tableCell:s,tableRow:a}};function l(d,p,b,w){return u(f(d,b,w),d.align)}function a(d,p,b,w){const g=c(d,b,w),C=u([g]);return C.slice(0,C.indexOf(`
`))}function s(d,p,b,w){const g=b.enter("tableCell"),C=b.enter("phrasing"),y=b.containerPhrasing(d,{...w,before:i,after:i});return C(),g(),y}function u(d,p){return Sr(d,{align:p,alignDelimiters:o,padding:n,stringLength:r})}function f(d,p,b){const w=d.children;let g=-1;const C=[],y=p.enter("table");for(;++g<w.length;)C[g]=c(w[g],p,b);return y(),C}function c(d,p,b){const w=d.children;let g=-1;const C=[],y=p.enter("tableRow");for(;++g<w.length;)C[g]=s(w[g],d,p,b);return y(),C}function h(d,p,b){let w=Tt.inlineCode(d,p,b);return b.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function zr(){return{exit:{taskListCheckValueChecked:kt,taskListCheckValueUnchecked:kt,paragraph:Ir}}}function Er(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Lr}}}function kt(e){const t=this.stack[this.stack.length-2];Z(t.type==="listItem"),t.checked=e.type==="taskListCheckValueChecked"}function Ir(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];Z(n.type==="paragraph");const o=n.children[0];if(o&&o.type==="text"){const r=t.children;let i=-1,l;for(;++i<r.length;){const a=r[i];if(a.type==="paragraph"){l=a;break}}l===n&&(o.value=o.value.slice(1),o.value.length===0?n.children.shift():n.position&&o.position&&typeof o.position.start.offset=="number"&&(o.position.start.column++,o.position.start.offset++,n.position.start=Object.assign({},o.position.start)))}}this.exit(e)}function Lr(e,t,n,o){const r=e.children[0],i=typeof e.checked=="boolean"&&r&&r.type==="paragraph",l="["+(e.checked?"x":" ")+"] ",a=n.createTracker(o);i&&a.move(l);let s=Tt.listItem(e,t,n,{...o,...a.current()});return i&&(s=s.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),s;function u(f){return f+l}}function _r(){return[Go(),or(),br(),Rr(),zr()]}function Pr(e){return{extensions:[Vo(),rr(),wr(),Fr(e),Er()]}}const Or={tokenize:Kr,partial:!0},an={tokenize:Gr,partial:!0},cn={tokenize:Vr,partial:!0},un={tokenize:qr,partial:!0},$r={tokenize:Ur,partial:!0},fn={name:"wwwAutolink",tokenize:Hr,previous:pn},hn={name:"protocolAutolink",tokenize:Wr,previous:dn},_={name:"emailAutolink",tokenize:jr,previous:mn},E={};function Br(){return{text:E}}let W=48;for(;W<123;)E[W]=_,W++,W===58?W=65:W===91&&(W=97);E[43]=_;E[45]=_;E[46]=_;E[95]=_;E[72]=[_,hn];E[104]=[_,hn];E[87]=[_,fn];E[119]=[_,fn];function jr(e,t,n){const o=this;let r,i;return l;function l(c){return!Ee(c)||!mn.call(o,o.previous)||Qe(o.events)?n(c):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(c))}function a(c){return Ee(c)?(e.consume(c),a):c===64?(e.consume(c),s):n(c)}function s(c){return c===46?e.check($r,f,u)(c):c===45||c===95||$e(c)?(i=!0,e.consume(c),s):f(c)}function u(c){return e.consume(c),r=!0,s}function f(c){return i&&r&&te(o.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(c)):n(c)}}function Hr(e,t,n){const o=this;return r;function r(l){return l!==87&&l!==119||!pn.call(o,o.previous)||Qe(o.events)?n(l):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(Or,e.attempt(an,e.attempt(cn,i),n),n)(l))}function i(l){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(l)}}function Wr(e,t,n){const o=this;let r="",i=!1;return l;function l(c){return(c===72||c===104)&&dn.call(o,o.previous)&&!Qe(o.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),r+=String.fromCodePoint(c),e.consume(c),a):n(c)}function a(c){if(te(c)&&r.length<5)return r+=String.fromCodePoint(c),e.consume(c),a;if(c===58){const h=r.toLowerCase();if(h==="http"||h==="https")return e.consume(c),s}return n(c)}function s(c){return c===47?(e.consume(c),i?u:(i=!0,s)):n(c)}function u(c){return c===null||Fn(c)||N(c)||X(c)||Oe(c)?n(c):e.attempt(an,e.attempt(cn,f),n)(c)}function f(c){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(c)}}function Kr(e,t,n){let o=0;return r;function r(l){return(l===87||l===119)&&o<3?(o++,e.consume(l),r):l===46&&o===3?(e.consume(l),i):n(l)}function i(l){return l===null?n(l):t(l)}}function Gr(e,t,n){let o,r,i;return l;function l(u){return u===46||u===95?e.check(un,s,a)(u):u===null||N(u)||X(u)||u!==45&&Oe(u)?s(u):(i=!0,e.consume(u),l)}function a(u){return u===95?o=!0:(r=o,o=void 0),e.consume(u),l}function s(u){return r||o||!i?n(u):t(u)}}function Vr(e,t){let n=0,o=0;return r;function r(l){return l===40?(n++,e.consume(l),r):l===41&&o<n?i(l):l===33||l===34||l===38||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===60||l===63||l===93||l===95||l===126?e.check(un,t,i)(l):l===null||N(l)||X(l)?t(l):(e.consume(l),r)}function i(l){return l===41&&o++,e.consume(l),r}}function qr(e,t,n){return o;function o(a){return a===33||a===34||a===39||a===41||a===42||a===44||a===46||a===58||a===59||a===63||a===95||a===126?(e.consume(a),o):a===38?(e.consume(a),i):a===93?(e.consume(a),r):a===60||a===null||N(a)||X(a)?t(a):n(a)}function r(a){return a===null||a===40||a===91||N(a)||X(a)?t(a):o(a)}function i(a){return te(a)?l(a):n(a)}function l(a){return a===59?(e.consume(a),o):te(a)?(e.consume(a),l):n(a)}}function Ur(e,t,n){return o;function o(i){return e.consume(i),r}function r(i){return $e(i)?n(i):t(i)}}function pn(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||N(e)}function dn(e){return!te(e)}function mn(e){return!(e===47||Ee(e))}function Ee(e){return e===43||e===45||e===46||e===95||$e(e)}function Qe(e){let t=e.length,n=!1;for(;t--;){const o=e[t][1];if((o.type==="labelLink"||o.type==="labelImage")&&!o._balanced){n=!0;break}if(o._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Jr={tokenize:ol,partial:!0};function Xr(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:el,continuation:{tokenize:tl},exit:nl}},text:{91:{name:"gfmFootnoteCall",tokenize:Yr},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Zr,resolveTo:Qr}}}}function Zr(e,t,n){const o=this;let r=o.events.length;const i=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let l;for(;r--;){const s=o.events[r][1];if(s.type==="labelImage"){l=s;break}if(s.type==="gfmFootnoteCall"||s.type==="labelLink"||s.type==="label"||s.type==="image"||s.type==="link")break}return a;function a(s){if(!l||!l._balanced)return n(s);const u=oe(o.sliceSerialize({start:l.end,end:o.now()}));return u.codePointAt(0)!==94||!i.includes(u.slice(1))?n(s):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),t(s))}}function Qr(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const o={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const i={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},e[e.length-1][1].start)},l={type:"chunkString",contentType:"string",start:Object.assign({},i.start),end:Object.assign({},i.end)},a=[e[n+1],e[n+2],["enter",o,t],e[n+3],e[n+4],["enter",r,t],["exit",r,t],["enter",i,t],["enter",l,t],["exit",l,t],["exit",i,t],e[e.length-2],e[e.length-1],["exit",o,t]];return e.splice(n,e.length-n+1,...a),e}function Yr(e,t,n){const o=this,r=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let i=0,l;return a;function a(c){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),s}function s(c){return c!==94?n(c):(e.enter("gfmFootnoteCallMarker"),e.consume(c),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",u)}function u(c){if(i>999||c===93&&!l||c===null||c===91||N(c))return n(c);if(c===93){e.exit("chunkString");const h=e.exit("gfmFootnoteCallString");return r.includes(oe(o.sliceSerialize(h)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(c),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(c)}return N(c)||(l=!0),i++,e.consume(c),c===92?f:u}function f(c){return c===91||c===92||c===93?(e.consume(c),i++,u):u(c)}}function el(e,t,n){const o=this,r=o.parser.gfmFootnotes||(o.parser.gfmFootnotes=[]);let i,l=0,a;return s;function s(p){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",f):n(p)}function f(p){if(l>999||p===93&&!a||p===null||p===91||N(p))return n(p);if(p===93){e.exit("chunkString");const b=e.exit("gfmFootnoteDefinitionLabelString");return i=oe(o.sliceSerialize(b)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(p),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),h}return N(p)||(a=!0),l++,e.consume(p),p===92?c:f}function c(p){return p===91||p===92||p===93?(e.consume(p),l++,f):f(p)}function h(p){return p===58?(e.enter("definitionMarker"),e.consume(p),e.exit("definitionMarker"),r.includes(i)||r.push(i),O(e,d,"gfmFootnoteDefinitionWhitespace")):n(p)}function d(p){return t(p)}}function tl(e,t,n){return e.check(zn,t,e.attempt(Jr,t,n))}function nl(e){e.exit("gfmFootnoteDefinition")}function ol(e,t,n){const o=this;return O(e,r,"gfmFootnoteDefinitionIndent",5);function r(i){const l=o.events[o.events.length-1];return l&&l[1].type==="gfmFootnoteDefinitionIndent"&&l[2].sliceSerialize(l[1],!0).length===4?t(i):n(i)}}function rl(e){let n=(e||{}).singleTilde;const o={name:"strikethrough",tokenize:i,resolveAll:r};return n==null&&(n=!0),{text:{126:o},insideSpan:{null:[o]},attentionMarkers:{null:[126]}};function r(l,a){let s=-1;for(;++s<l.length;)if(l[s][0]==="enter"&&l[s][1].type==="strikethroughSequenceTemporary"&&l[s][1]._close){let u=s;for(;u--;)if(l[u][0]==="exit"&&l[u][1].type==="strikethroughSequenceTemporary"&&l[u][1]._open&&l[s][1].end.offset-l[s][1].start.offset===l[u][1].end.offset-l[u][1].start.offset){l[s][1].type="strikethroughSequence",l[u][1].type="strikethroughSequence";const f={type:"strikethrough",start:Object.assign({},l[u][1].start),end:Object.assign({},l[s][1].end)},c={type:"strikethroughText",start:Object.assign({},l[u][1].end),end:Object.assign({},l[s][1].start)},h=[["enter",f,a],["enter",l[u][1],a],["exit",l[u][1],a],["enter",c,a]],d=a.parser.constructs.insideSpan.null;d&&ye(h,h.length,0,En(d,l.slice(u+1,s),a)),ye(h,h.length,0,[["exit",c,a],["enter",l[s][1],a],["exit",l[s][1],a],["exit",f,a]]),ye(l,u-1,s-u+3,h),s=u+h.length-2;break}}for(s=-1;++s<l.length;)l[s][1].type==="strikethroughSequenceTemporary"&&(l[s][1].type="data");return l}function i(l,a,s){const u=this.previous,f=this.events;let c=0;return h;function h(p){return u===126&&f[f.length-1][1].type!=="characterEscape"?s(p):(l.enter("strikethroughSequenceTemporary"),d(p))}function d(p){const b=ot(u);if(p===126)return c>1?s(p):(l.consume(p),c++,d);if(c<2&&!n)return s(p);const w=l.exit("strikethroughSequenceTemporary"),g=ot(p);return w._open=!g||g===2&&!!b,w._close=!b||b===2&&!!g,a(p)}}}class ll{constructor(){this.map=[]}add(t,n,o){il(this,t,n,o)}consume(t){if(this.map.sort(function(i,l){return i[0]-l[0]}),this.map.length===0)return;let n=this.map.length;const o=[];for(;n>0;)n-=1,o.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];o.push([...t]),t.length=0;let r=o.pop();for(;r;)t.push(...r),r=o.pop();this.map.length=0}}function il(e,t,n,o){let r=0;if(!(n===0&&o.length===0)){for(;r<e.map.length;){if(e.map[r][0]===t){e.map[r][1]+=n,e.map[r][2].push(...o);return}r+=1}e.map.push([t,n,o])}}function sl(e,t){let n=!1;const o=[];for(;t<e.length;){const r=e[t];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&o.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const i=o.length-1;o[i]=o[i]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return o}function al(){return{flow:{null:{name:"table",tokenize:cl,resolveAll:ul}}}}function cl(e,t,n){const o=this;let r=0,i=0,l;return a;function a(m){let Y=o.events.length-1;for(;Y>-1;){const nt=o.events[Y][1].type;if(nt==="lineEnding"||nt==="linePrefix")Y--;else break}const et=Y>-1?o.events[Y][1].type:null,tt=et==="tableHead"||et==="tableRow"?R:s;return tt===R&&o.parser.lazy[o.now().line]?n(m):tt(m)}function s(m){return e.enter("tableHead"),e.enter("tableRow"),u(m)}function u(m){return m===124||(l=!0,i+=1),f(m)}function f(m){return m===null?n(m):ee(m)?i>1?(i=0,o.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(m),e.exit("lineEnding"),d):n(m):V(m)?O(e,f,"whitespace")(m):(i+=1,l&&(l=!1,r+=1),m===124?(e.enter("tableCellDivider"),e.consume(m),e.exit("tableCellDivider"),l=!0,f):(e.enter("data"),c(m)))}function c(m){return m===null||m===124||N(m)?(e.exit("data"),f(m)):(e.consume(m),m===92?h:c)}function h(m){return m===92||m===124?(e.consume(m),c):c(m)}function d(m){return o.interrupt=!1,o.parser.lazy[o.now().line]?n(m):(e.enter("tableDelimiterRow"),l=!1,V(m)?O(e,p,"linePrefix",o.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(m):p(m))}function p(m){return m===45||m===58?w(m):m===124?(l=!0,e.enter("tableCellDivider"),e.consume(m),e.exit("tableCellDivider"),b):A(m)}function b(m){return V(m)?O(e,w,"whitespace")(m):w(m)}function w(m){return m===58?(i+=1,l=!0,e.enter("tableDelimiterMarker"),e.consume(m),e.exit("tableDelimiterMarker"),g):m===45?(i+=1,g(m)):m===null||ee(m)?T(m):A(m)}function g(m){return m===45?(e.enter("tableDelimiterFiller"),C(m)):A(m)}function C(m){return m===45?(e.consume(m),C):m===58?(l=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(m),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(m))}function y(m){return V(m)?O(e,T,"whitespace")(m):T(m)}function T(m){return m===124?p(m):m===null||ee(m)?!l||r!==i?A(m):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(m)):A(m)}function A(m){return n(m)}function R(m){return e.enter("tableRow"),z(m)}function z(m){return m===124?(e.enter("tableCellDivider"),e.consume(m),e.exit("tableCellDivider"),z):m===null||ee(m)?(e.exit("tableRow"),t(m)):V(m)?O(e,z,"whitespace")(m):(e.enter("data"),P(m))}function P(m){return m===null||m===124||N(m)?(e.exit("data"),z(m)):(e.consume(m),m===92?bn:P)}function bn(m){return m===92||m===124?(e.consume(m),P):P(m)}}function ul(e,t){let n=-1,o=!0,r=0,i=[0,0,0,0],l=[0,0,0,0],a=!1,s=0,u,f,c;const h=new ll;for(;++n<e.length;){const d=e[n],p=d[1];d[0]==="enter"?p.type==="tableHead"?(a=!1,s!==0&&(Ct(h,t,s,u,f),f=void 0,s=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",u,t]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(o=!0,c=void 0,i=[0,0,0,0],l=[0,n+1,0,0],a&&(a=!1,f={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",f,t]])),r=p.type==="tableDelimiterRow"?2:f?3:1):r&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(o=!1,l[2]===0&&(i[1]!==0&&(l[0]=l[1],c=he(h,t,i,r,void 0,c),i=[0,0,0,0]),l[2]=n)):p.type==="tableCellDivider"&&(o?o=!1:(i[1]!==0&&(l[0]=l[1],c=he(h,t,i,r,void 0,c)),i=l,l=[i[1],n,0,0])):p.type==="tableHead"?(a=!0,s=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(s=n,i[1]!==0?(l[0]=l[1],c=he(h,t,i,r,n,c)):l[1]!==0&&(c=he(h,t,l,r,n,c)),r=0):r&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(l[3]=n)}for(s!==0&&Ct(h,t,s,u,f),h.consume(t.events),n=-1;++n<t.events.length;){const d=t.events[n];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=sl(t.events,n))}return e}function he(e,t,n,o,r,i){const l=o===1?"tableHeader":o===2?"tableDelimiter":"tableData",a="tableContent";n[0]!==0&&(i.end=Object.assign({},J(t.events,n[0])),e.add(n[0],0,[["exit",i,t]]));const s=J(t.events,n[1]);if(i={type:l,start:Object.assign({},s),end:Object.assign({},s)},e.add(n[1],0,[["enter",i,t]]),n[2]!==0){const u=J(t.events,n[2]),f=J(t.events,n[3]),c={type:a,start:Object.assign({},u),end:Object.assign({},f)};if(e.add(n[2],0,[["enter",c,t]]),o!==2){const h=t.events[n[2]],d=t.events[n[3]];if(h[1].end=Object.assign({},d[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,b=n[3]-n[2]-1;e.add(p,b,[])}}e.add(n[3]+1,0,[["exit",c,t]])}return r!==void 0&&(i.end=Object.assign({},J(t.events,r)),e.add(r,0,[["exit",i,t]]),i=void 0),i}function Ct(e,t,n,o,r){const i=[],l=J(t.events,n);r&&(r.end=Object.assign({},l),i.push(["exit",r,t])),o.end=Object.assign({},l),i.push(["exit",o,t]),e.add(n+1,0,i)}function J(e,t){const n=e[t],o=n[0]==="enter"?"start":"end";return n[1][o]}const fl={name:"tasklistCheck",tokenize:pl};function hl(){return{text:{91:fl}}}function pl(e,t,n){const o=this;return r;function r(s){return o.previous!==null||!o._gfmTasklistFirstContentOfListItem?n(s):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(s),e.exit("taskListCheckMarker"),i)}function i(s){return N(s)?(e.enter("taskListCheckValueUnchecked"),e.consume(s),e.exit("taskListCheckValueUnchecked"),l):s===88||s===120?(e.enter("taskListCheckValueChecked"),e.consume(s),e.exit("taskListCheckValueChecked"),l):n(s)}function l(s){return s===93?(e.enter("taskListCheckMarker"),e.consume(s),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(s)}function a(s){return ee(s)?t(s):V(s)?e.check({tokenize:dl},t,n)(s):n(s)}}function dl(e,t,n){return O(e,o,"whitespace");function o(r){return r===null?n(r):t(r)}}function ml(e){return In([Br(),Xr(),rl(e),al(),hl()])}const gl={};function bl(e){const t=this,n=e||gl,o=t.data(),r=o.micromarkExtensions||(o.micromarkExtensions=[]),i=o.fromMarkdownExtensions||(o.fromMarkdownExtensions=[]),l=o.toMarkdownExtensions||(o.toMarkdownExtensions=[]);r.push(ml(n)),i.push(_r()),l.push(Pr(n))}const Ye=Ln("remarkGFM",()=>bl);k(Ye.plugin,{displayName:"Remark<remarkGFMPlugin>",group:"Remark"});k(Ye.options,{displayName:"RemarkConfig<remarkGFMPlugin>",group:"Remark"});const wl=new ne("MILKDOWN_KEEP_TABLE_ALIGN_PLUGIN");function kl(e,t){let n=0;return t.forEach((o,r,i)=>{o===e&&(n=i)}),n}const gn=Pe(()=>new Le({key:wl,appendTransaction:(e,t,n)=>{let o;const r=(i,l)=>{if(o||(o=n.tr),i.type.name!=="table_cell")return;const a=n.doc.resolve(l),s=a.node(a.depth),f=a.node(a.depth-1).firstChild;if(!f)return;const c=kl(i,s),h=f.maybeChild(c);if(!h)return;const d=h.attrs.alignment,p=i.attrs.alignment;d!==p&&o.setNodeMarkup(l,void 0,{...i.attrs,alignment:d})};return t.doc!==n.doc&&n.doc.descendants(r),o}}));k(gn,{displayName:"Prose<keepTableAlignPlugin>",group:"Prose"});const Cl=[gn,nn,Ye,on].flat(),yl=[Yt,Q,ke,ie,Ce,se,Je,Xe,Be,re].flat(),xl=[Ve,Ge,qe,Bt,jt,Ht,Wt,Kt,Gt,Vt,Jt,Xt,qt,Ut,Zt,je],Rl=[yl,vo,Fo,Do,xl,Cl].flat();export{Rl as g,Bt as i,Fo as m};
