{"version":3,"file":"index.es.js","sources":["../../src/__internal__/meta.ts","../../src/code-block/config.ts","../../src/__internal__/helper.ts","../../src/code-block/view/node-view.ts","../../src/code-block/view/loader.ts","../../src/code-block/view/component.ts","../../src/code-block/view/index.ts","../../src/code-block/index.ts"],"sourcesContent":["import type { Meta, MilkdownPlugin } from '@milkdown/ctx'\n\nexport function withMeta<T extends MilkdownPlugin>(\n  plugin: T,\n  meta: Partial<Meta> & Pick<Meta, 'displayName'>\n): T {\n  Object.assign(plugin, {\n    meta: {\n      package: '@milkdown/components',\n      ...meta,\n    },\n  })\n\n  return plugin\n}\n","import { $ctx } from '@milkdown/utils'\nimport type { Extension } from '@codemirror/state'\nimport type { LanguageDescription } from '@codemirror/language'\nimport { html } from 'atomico'\nimport { withMeta } from '../__internal__/meta'\n\nexport interface CodeBlockConfig {\n  extensions: Extension[]\n  languages: LanguageDescription[]\n  expandIcon: () => ReturnType<typeof html> | string | HTMLElement\n  searchIcon: () => ReturnType<typeof html> | string | HTMLElement\n  clearSearchIcon: () => ReturnType<typeof html> | string | HTMLElement\n  searchPlaceholder: string\n  noResultText: string\n  renderLanguage: (\n    language: string,\n    selected: boolean\n  ) => ReturnType<typeof html>\n}\n\nexport const defaultConfig: CodeBlockConfig = {\n  extensions: [],\n  languages: [],\n  expandIcon: () => '⬇',\n  searchIcon: () => '🔍',\n  clearSearchIcon: () => '⌫',\n  searchPlaceholder: 'Search language',\n  noResultText: 'No result',\n  renderLanguage: (language) => html`${language}`,\n}\n\nexport const codeBlockConfig = $ctx(defaultConfig, 'codeBlockConfigCtx')\n\nwithMeta(codeBlockConfig, {\n  displayName: 'Config<code-block>',\n  group: 'CodeBlock',\n})\n","export function defIfNotExists(\n  tagName: string,\n  element: CustomElementConstructor\n) {\n  const current = customElements.get(tagName)\n  if (current == null) {\n    customElements.define(tagName, element)\n    return\n  }\n\n  if (current === element) return\n\n  // eslint-disable-next-line no-console\n  console.warn(`Custom element ${tagName} has been defined before.`)\n}\n","import type { EditorView, NodeView } from '@milkdown/prose/view'\nimport {\n  EditorView as CodeMirror,\n  type KeyBinding,\n  type ViewUpdate,\n  keymap as cmKeymap,\n} from '@codemirror/view'\nimport type { Node } from '@milkdown/prose/model'\nimport { redo, undo } from '@milkdown/prose/history'\nimport { Compartment, EditorState } from '@codemirror/state'\nimport type { Line, SelectionRange } from '@codemirror/state'\nimport { exitCode } from '@milkdown/prose/commands'\nimport { TextSelection } from '@milkdown/prose/state'\n\nimport type { CodeBlockConfig } from '../config'\nimport type { CodeComponentProps } from './component'\nimport type { LanguageLoader } from './loader'\n\nexport class CodeMirrorBlock implements NodeView {\n  dom: HTMLElement & CodeComponentProps\n  cm: CodeMirror\n\n  private updating = false\n  private languageName: string = ''\n\n  private readonly languageConf: Compartment\n  private readonly readOnlyConf: Compartment\n\n  constructor(\n    public node: Node,\n    public view: EditorView,\n    public getPos: () => number | undefined,\n    public loader: LanguageLoader,\n    public config: CodeBlockConfig\n  ) {\n    this.languageConf = new Compartment()\n    this.readOnlyConf = new Compartment()\n\n    this.cm = new CodeMirror({\n      doc: this.node.textContent,\n      root: this.view.root,\n      extensions: [\n        this.readOnlyConf.of(EditorState.readOnly.of(!this.view.editable)),\n        cmKeymap.of(this.codeMirrorKeymap()),\n        this.languageConf.of([]),\n        ...config.extensions,\n        CodeMirror.updateListener.of(this.forwardUpdate),\n      ],\n    })\n\n    this.dom = this.createDom()\n\n    this.updateLanguage()\n  }\n\n  private forwardUpdate = (update: ViewUpdate) => {\n    if (this.updating || !this.cm.hasFocus) return\n    let offset = (this.getPos() ?? 0) + 1\n    const { main } = update.state.selection\n    const selFrom = offset + main.from\n    const selTo = offset + main.to\n    const pmSel = this.view.state.selection\n    if (update.docChanged || pmSel.from !== selFrom || pmSel.to !== selTo) {\n      const tr = this.view.state.tr\n      update.changes.iterChanges((fromA, toA, fromB, toB, text) => {\n        if (text.length)\n          tr.replaceWith(\n            offset + fromA,\n            offset + toA,\n            this.view.state.schema.text(text.toString())\n          )\n        else tr.delete(offset + fromA, offset + toA)\n        offset += toB - fromB - (toA - fromA)\n      })\n      tr.setSelection(TextSelection.create(tr.doc, selFrom, selTo))\n      this.view.dispatch(tr)\n    }\n  }\n\n  private createDom() {\n    const dom = document.createElement('milkdown-code-block') as HTMLElement &\n      CodeComponentProps\n    dom.codemirror = this.cm\n    dom.getAllLanguages = this.getAllLanguages\n    dom.setLanguage = this.setLanguage\n    dom.isEditorReadonly = () => !this.view.editable\n    const { languages, extensions, ...viewConfig } = this.config\n    dom.config = viewConfig\n    return dom\n  }\n\n  private updateLanguage() {\n    const languageName = this.node.attrs.language\n\n    if (languageName === this.languageName) return\n\n    this.dom.language = languageName\n    const language = this.loader.load(languageName ?? '')\n\n    language.then((lang) => {\n      if (lang) {\n        this.cm.dispatch({\n          effects: this.languageConf.reconfigure(lang),\n        })\n        this.languageName = languageName\n      }\n    })\n  }\n\n  private codeMirrorKeymap = (): KeyBinding[] => {\n    const view = this.view\n    return [\n      { key: 'ArrowUp', run: () => this.maybeEscape('line', -1) },\n      { key: 'ArrowLeft', run: () => this.maybeEscape('char', -1) },\n      { key: 'ArrowDown', run: () => this.maybeEscape('line', 1) },\n      { key: 'ArrowRight', run: () => this.maybeEscape('char', 1) },\n      {\n        key: 'Mod-Enter',\n        run: () => {\n          if (!exitCode(view.state, view.dispatch)) return false\n\n          view.focus()\n          return true\n        },\n      },\n      { key: 'Mod-z', run: () => undo(view.state, view.dispatch) },\n      { key: 'Shift-Mod-z', run: () => redo(view.state, view.dispatch) },\n      { key: 'Mod-y', run: () => redo(view.state, view.dispatch) },\n      {\n        key: 'Backspace',\n        run: () => {\n          const ranges = this.cm.state.selection.ranges\n\n          if (ranges.length > 1) return false\n\n          const selection = ranges[0]\n\n          if (selection && (!selection.empty || selection.anchor > 0))\n            return false\n\n          if (this.cm.state.doc.lines >= 2) return false\n\n          const state = this.view.state\n          const pos = this.getPos() ?? 0\n          const tr = state.tr.replaceWith(\n            pos,\n            pos + this.node.nodeSize,\n            state.schema.nodes.paragraph!.createChecked({}, this.node.content)\n          )\n\n          tr.setSelection(TextSelection.near(tr.doc.resolve(pos)))\n\n          this.view.dispatch(tr)\n          this.view.focus()\n          return true\n        },\n      },\n    ]\n  }\n\n  private maybeEscape = (unit: 'line' | 'char', dir: -1 | 1): boolean => {\n    const { state } = this.cm\n    let main: SelectionRange | Line = state.selection.main\n    if (!main.empty) return false\n    if (unit === 'line') main = state.doc.lineAt(main.head)\n    if (dir < 0 ? main.from > 0 : main.to < state.doc.length) return false\n\n    const targetPos = (this.getPos() ?? 0) + (dir < 0 ? 0 : this.node.nodeSize)\n    const selection = TextSelection.near(\n      this.view.state.doc.resolve(targetPos),\n      dir\n    )\n    const tr = this.view.state.tr.setSelection(selection).scrollIntoView()\n    this.view.dispatch(tr)\n    this.view.focus()\n    return true\n  }\n\n  setSelection(anchor: number, head: number) {\n    if (!this.cm.dom.isConnected) return\n\n    this.cm.focus()\n    this.updating = true\n    this.cm.dispatch({ selection: { anchor, head } })\n    this.updating = false\n  }\n\n  update(node: Node) {\n    if (node.type !== this.node.type) return false\n\n    if (this.updating) return true\n\n    this.node = node\n    this.updateLanguage()\n    if (this.view.editable === this.cm.state.readOnly) {\n      this.cm.dispatch({\n        effects: this.readOnlyConf.reconfigure(\n          EditorState.readOnly.of(!this.view.editable)\n        ),\n      })\n    }\n\n    const change = computeChange(this.cm.state.doc.toString(), node.textContent)\n    if (change) {\n      this.updating = true\n      this.cm.dispatch({\n        changes: { from: change.from, to: change.to, insert: change.text },\n      })\n      this.updating = false\n    }\n    return true\n  }\n\n  selectNode() {\n    this.dom.selected = true\n    this.cm.focus()\n  }\n\n  deselectNode() {\n    this.dom.selected = false\n  }\n\n  stopEvent() {\n    return true\n  }\n\n  destroy() {\n    this.cm.destroy()\n  }\n\n  setLanguage = (language: string) => {\n    this.view.dispatch(\n      this.view.state.tr.setNodeAttribute(\n        this.getPos() ?? 0,\n        'language',\n        language\n      )\n    )\n  }\n\n  getAllLanguages = () => {\n    return this.loader.getAll()\n  }\n}\n\nfunction computeChange(\n  oldVal: string,\n  newVal: string\n): { from: number; to: number; text: string } | null {\n  if (oldVal === newVal) return null\n\n  let start = 0\n  let oldEnd = oldVal.length\n  let newEnd = newVal.length\n\n  while (\n    start < oldEnd &&\n    oldVal.charCodeAt(start) === newVal.charCodeAt(start)\n  )\n    ++start\n\n  while (\n    oldEnd > start &&\n    newEnd > start &&\n    oldVal.charCodeAt(oldEnd - 1) === newVal.charCodeAt(newEnd - 1)\n  ) {\n    oldEnd--\n    newEnd--\n  }\n\n  return { from: start, to: oldEnd, text: newVal.slice(start, newEnd) }\n}\n","import type { LanguageDescription, LanguageSupport } from '@codemirror/language'\n\nexport interface LanguageInfo {\n  name: string\n  alias: readonly string[]\n}\n\nexport class LanguageLoader {\n  private readonly map: Record<string, LanguageDescription>\n\n  constructor(private languages: LanguageDescription[]) {\n    this.map = {}\n\n    languages.forEach((language) => {\n      language.alias.forEach((alias) => {\n        this.map[alias] = language\n      })\n    })\n  }\n\n  getAll(): LanguageInfo[] {\n    return this.languages.map((language): LanguageInfo => {\n      return {\n        name: language.name,\n        alias: language.alias,\n      }\n    })\n  }\n\n  load(languageName: string): Promise<LanguageSupport | undefined> {\n    const languageMap = this.map\n    const language = languageMap[languageName.toLowerCase()]\n\n    if (!language) return Promise.resolve(undefined)\n\n    if (language.support) return Promise.resolve(language.support)\n\n    return language.load()\n  }\n}\n","import type { EditorView as CodeMirror } from '@codemirror/view'\nimport type { Component } from 'atomico'\nimport {\n  c,\n  h,\n  html,\n  useEffect,\n  useHost,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'atomico'\nimport { computePosition } from '@floating-ui/dom'\nimport clsx from 'clsx'\nimport type { CodeBlockConfig } from '../config'\nimport type { LanguageInfo } from './loader'\n\nexport interface CodeComponentProps {\n  selected: boolean\n  codemirror: CodeMirror\n  language: string\n  getAllLanguages: () => Array<LanguageInfo>\n  setLanguage: (language: string) => void\n  isEditorReadonly: () => boolean\n  config: Omit<CodeBlockConfig, 'languages' | 'extensions'>\n}\n\nexport const codeComponent: Component<CodeComponentProps> = ({\n  selected = false,\n  codemirror,\n  getAllLanguages,\n  setLanguage,\n  language,\n  config,\n  isEditorReadonly,\n}) => {\n  const host = useHost()\n  const triggerRef = useRef<HTMLButtonElement>()\n  const pickerRef = useRef<HTMLDivElement>()\n  const searchRef = useRef<HTMLInputElement>()\n  const [filter, setFilter] = useState('')\n  const [showPicker, setShowPicker] = useState(false)\n\n  const root = useMemo(() => host.current.getRootNode() as HTMLElement, [host])\n\n  useEffect(() => {\n    const lang = getAllLanguages?.()?.find((languageInfo) =>\n      languageInfo.alias.some(\n        (alias) => alias.toLowerCase() === language?.toLowerCase()\n      )\n    )\n\n    if (lang && lang.name !== language) setLanguage?.(lang.name)\n  }, [language])\n\n  useEffect(() => {\n    setShowPicker(false)\n  }, [language])\n\n  useEffect(() => {\n    const clickHandler = (e: MouseEvent) => {\n      const target = e.target as HTMLElement\n\n      if (triggerRef.current && triggerRef.current.contains(target)) return\n\n      const picker = pickerRef.current\n      if (!picker) return\n\n      if (picker.dataset.expanded !== 'true') return\n\n      if (!picker.contains(target)) setShowPicker(false)\n    }\n\n    root.addEventListener('click', clickHandler)\n\n    return () => {\n      root.removeEventListener('click', clickHandler)\n    }\n  }, [])\n\n  useLayoutEffect(() => {\n    setFilter('')\n    const picker = triggerRef.current\n    const languageList = pickerRef.current\n    if (!picker || !languageList) return\n\n    computePosition(picker, languageList, {\n      placement: 'bottom-start',\n    }).then(({ x, y }) => {\n      Object.assign(languageList.style, {\n        left: `${x}px`,\n        top: `${y}px`,\n      })\n    })\n  }, [showPicker])\n\n  const languages = useMemo(() => {\n    if (!showPicker) return []\n\n    const all = getAllLanguages?.() ?? []\n\n    const selected = all.find(\n      (languageInfo) =>\n        languageInfo.name.toLowerCase() === language?.toLowerCase()\n    )\n\n    const filtered = all.filter((languageInfo) => {\n      return (\n        (languageInfo.name.toLowerCase().includes(filter.toLowerCase()) ||\n          languageInfo.alias.some((alias) =>\n            alias.toLowerCase().includes(filter.toLowerCase())\n          )) &&\n        languageInfo !== selected\n      )\n    })\n\n    if (filtered.length === 0) return []\n\n    if (!selected) return filtered\n\n    return [selected, ...filtered]\n  }, [filter, showPicker, language])\n\n  const changeFilter = (e: InputEvent) => {\n    const target = e.target as HTMLInputElement\n    setFilter(target.value)\n  }\n\n  const onTogglePicker = (e: Event) => {\n    e.preventDefault()\n    e.stopPropagation()\n    if (isEditorReadonly?.()) return\n\n    setShowPicker((show) => {\n      if (!show) {\n        setTimeout(() => searchRef.current?.focus(), 0)\n      }\n      return !show\n    })\n  }\n\n  const onClear = (e: MouseEvent) => {\n    e.preventDefault()\n    setFilter('')\n  }\n\n  const onSearchKeydown = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') setFilter('')\n  }\n\n  const onListKeydown = (e: KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      const active = document.activeElement\n      if (active instanceof HTMLElement && active.dataset.language)\n        setLanguage?.(active.dataset.language)\n    }\n  }\n\n  const renderedLanguageList = useMemo(() => {\n    if (!languages?.length)\n      return html`<li class=\"language-list-item no-result\">\n        ${config?.noResultText}\n      </li>`\n\n    return languages.map(\n      (languageInfo) =>\n        html`<li\n          role=\"listitem\"\n          tabindex=\"0\"\n          class=\"language-list-item\"\n          aria-selected=${languageInfo.name.toLowerCase() ===\n          language?.toLowerCase()}\n          data-language=${languageInfo.name}\n          onclick=${() => setLanguage?.(languageInfo.name)}\n        >\n          ${config?.renderLanguage?.(\n            languageInfo.name,\n            languageInfo.name.toLowerCase() === language?.toLowerCase()\n          )}\n        </li>`\n    )\n  }, [languages])\n\n  return html`<host class=${clsx(selected && 'selected')}>\n    <div class=\"tools\">\n      <button\n        type=\"button\"\n        ref=${triggerRef}\n        class=\"language-button\"\n        onpointerdown=${onTogglePicker}\n        data-expanded=${showPicker}\n      >\n        ${language || 'Text'}\n        <div class=\"expand-icon\">${config?.expandIcon?.()}</div>\n      </button>\n      <div\n        ref=${pickerRef}\n        data-expanded=${showPicker}\n        class=${clsx('language-picker', showPicker && 'show')}\n      >\n        <div class=\"list-wrapper\">\n          <div class=\"search-box\">\n            <div class=\"search-icon\">${config?.searchIcon?.()}</div>\n            <input\n              ref=${searchRef}\n              class=\"search-input\"\n              placeholder=${config?.searchPlaceholder}\n              value=${filter}\n              oninput=${changeFilter}\n              onkeydown=${onSearchKeydown}\n            />\n            <div\n              class=${clsx('clear-icon', filter.length === 0 && 'hidden')}\n              onmousedown=${onClear}\n            >\n              ${config?.clearSearchIcon?.()}\n            </div>\n          </div>\n          <ul class=\"language-list\" role=\"listbox\" onkeydown=${onListKeydown}>\n            ${renderedLanguageList}\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div class=\"codemirror-host\">${h(codemirror?.dom, {})}</div>\n  </host>`\n}\n\ncodeComponent.props = {\n  selected: Boolean,\n  codemirror: Object,\n  language: String,\n  getAllLanguages: Function,\n  setLanguage: Function,\n  isEditorReadonly: Function,\n  config: Object,\n}\n\nexport const CodeElement = c(codeComponent)\n","import { $view } from '@milkdown/utils'\nimport { codeBlockSchema } from '@milkdown/preset-commonmark'\nimport type { NodeViewConstructor } from '@milkdown/prose/view'\nimport { codeBlockConfig } from '../config'\nimport { withMeta } from '../../__internal__/meta'\nimport { defIfNotExists } from '../../__internal__/helper'\nimport { CodeMirrorBlock } from './node-view'\nimport { LanguageLoader } from './loader'\nimport { CodeElement } from './component'\n\ndefIfNotExists('milkdown-code-block', CodeElement)\nexport const codeBlockView = $view(\n  codeBlockSchema.node,\n  (ctx): NodeViewConstructor => {\n    const config = ctx.get(codeBlockConfig.key)\n    const languageLoader = new LanguageLoader(config.languages)\n    return (node, view, getPos) =>\n      new CodeMirrorBlock(node, view, getPos, languageLoader, config)\n  }\n)\n\nwithMeta(codeBlockView, {\n  displayName: 'NodeView<code-block>',\n  group: 'CodeBlock',\n})\n","import type { MilkdownPlugin } from '@milkdown/ctx'\nimport { codeBlockView } from './view'\nimport { codeBlockConfig } from './config'\n\nexport * from './config'\nexport * from './view'\n\nexport const codeBlockComponent: MilkdownPlugin[] = [\n  codeBlockView,\n  codeBlockConfig,\n]\n"],"names":["CodeMirror","cmKeymap","_a","selected"],"mappings":"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"}